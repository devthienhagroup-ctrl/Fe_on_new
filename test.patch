diff --git a/src/components/dich-vu/Phi-dich-vu.vue b/src/components/dich-vu/Phi-dich-vu.vue
index bc7bbe3dd829ec6372182a24bcb180cda57f2734..68f2229a9d1ec9b07d61389992be050c8e068381 100644
--- a/src/components/dich-vu/Phi-dich-vu.vue
+++ b/src/components/dich-vu/Phi-dich-vu.vue
@@ -204,80 +204,83 @@
                       <div class="icon-btn icon-menu" title="Tác vụ" @click.stop="toggleActionMenu(contract.id, $event)">
                         <i class="fa-solid fa-ellipsis"></i>
                       </div>
                     </div>
                   </td>
                 </tr>
                 </tbody>
               </table>
             </div>
           </div>
         </div>
         <teleport to="body">
           <div
             v-if="openActionMenu && activeActionContract"
             class="action-menu action-menu--floating"
             :style="actionMenuPositionStyle"
             @click.stop
           >
             <div class="action-item" @click="openDetail(activeActionContract); closeActionMenu()">
               <span class="icon-btn icon-view" aria-hidden="true">
                 <i class="fa-solid fa-eye"></i>
               </span>
               <span class="action-label">Chi tiết</span>
             </div>
             <div
+              v-if="canPayContract"
               class="action-item"
               :class="{ disabled: !isActiveContract(activeActionContract) }"
               @click="isActiveContract(activeActionContract) && (openPay(activeActionContract), closeActionMenu())"
             >
               <span class="icon-btn icon-pay" aria-hidden="true">
                 <i class="fa-solid fa-circle-dollar-to-slot"></i>
               </span>
               <span class="action-label">Đóng phí</span>
             </div>
             <div
+              v-if="canRefundContract"
               class="action-item"
               :class="{ disabled: !isActiveContract(activeActionContract) }"
               @click="isActiveContract(activeActionContract) && (openRefund(activeActionContract), closeActionMenu())"
             >
               <span class="icon-btn icon-refund" aria-hidden="true">
                 <i class="fa-solid fa-arrow-rotate-left"></i>
               </span>
               <span class="action-label">Hoàn phí</span>
             </div>
             <div
+              v-if="canAdjustContract"
               class="action-item"
               :class="{ disabled: !isActiveContract(activeActionContract) }"
               @click="isActiveContract(activeActionContract) && (openAdjust(activeActionContract), closeActionMenu())"
             >
               <span class="icon-btn icon-adjust" aria-hidden="true">
                 <i class="fa-solid fa-sliders"></i>
               </span>
               <span class="action-label">Điều chỉnh</span>
             </div>
-            <div class="action-item" @click="openDelete(activeActionContract); closeActionMenu()">
+            <div v-if="canDeleteContract" class="action-item" @click="openDelete(activeActionContract); closeActionMenu()">
               <span class="icon-btn icon-del" aria-hidden="true">
                 <i class="fa-solid fa-trash"></i>
               </span>
               <span class="action-label">Xóa</span>
             </div>
           </div>
         </teleport>
         <div class="pagination">
           <div class="muted tiny">
             Hiển thị {{ pageStart }}-{{ pageEnd }} / {{ totalElements }}
           </div>
           <div class="pager">
             <button class="btn ghost btn-page" :disabled="currentPage === 1" @click="prevPage">Trước</button>
             <button
               v-for="page in totalPages"
               :key="page"
               class="btn ghost btn-page"
               :class="{ active: currentPage === page }"
               @click="goToPage(page)"
             >
               {{ page }}
             </button>
             <button class="btn ghost btn-page" :disabled="currentPage === totalPages" @click="nextPage">Sau</button>
           </div>
         </div>
@@ -605,51 +608,51 @@
                     <div class="k"><span class="dot"></span>Tổng điều chỉnh</div>
                     <div class="v price p2">{{ formatMoney(getTongDieuChinh(currentContract)) }}</div>
                   </div>
                   <div class="kpi">
                   <div class="k"><span class="dot"></span>Còn thiếu</div>
                   <div class="v price p1">{{ formatMoney(getConThieu(currentContract)) }}</div>
                 </div>
                 <div class="kpi">
                   <div class="k"><span class="dot"></span>Đã thu</div>
                   <div class="v price p3">{{ formatMoney(getDoanhThuRow(currentContract)) }}</div>
                 </div>
                 </div>

                 <div class="note mt-3">
                   <b>Lưu ý:</b> Đóng phí sẽ làm tăng <span class="mono">Thực thu</span>.
                 </div>
               </div>
             </div>
           </div>
         </div>

         <div class="modal-f">
           <button class="btn ghost" @click="closeModal('modalPay')">
             <i class="fa-solid fa-ban"></i> Hủy
           </button>
-          <button class="btn primary" @click="savePayment">
+          <button v-if="canPayContract" class="btn primary" @click="savePayment">
             <i class="fa-solid fa-check"></i> Xác nhận đóng
           </button>
         </div>
       </div>
     </div>

     <!-- MODAL: REFUND -->
     <div class="modal" :class="{ show: showModal === 'modalRefund' }" @click.self="closeModal('modalRefund')">
       <div class="modal-card">
         <div class="modal-h">
           <div class="modal-title">
             <i class="fa-solid fa-arrow-rotate-left"></i>
             Hoàn phí
           </div>
           <button class="x" @click="closeModal('modalRefund')">
             <i class="fa-solid fa-xmark"></i>
           </button>
         </div>

         <div class="modal-b">
           <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
             <div class="card">
               <div class="card-h"><i class="fa-solid fa-reply"></i> Thông tin hoàn</div>
               <div class="field">
                 <label><i class="fa-solid fa-money-bill-transfer"></i> Số tiền hoàn</label>
@@ -686,51 +689,51 @@
                     <div class="k"><span class="dot"></span>Tổng điều chỉnh</div>
                     <div class="v price p2">{{ formatMoney(getTongDieuChinh(currentContract)) }}</div>
                   </div>
                   <div class="kpi">
                     <div class="k"><span class="dot"></span>Còn thiếu</div>
                     <div class="v price p1">{{ formatMoney(getConThieu(currentContract)) }}</div>
                   </div>
                   <div class="kpi">
                     <div class="k"><span class="dot"></span>Đã thu</div>
                     <div class="v price p3">{{ formatMoney(getDoanhThuRow(currentContract)) }}</div>
                   </div>
                 </div>

                 <div class="note mt-3">
                   <b>Lưu ý:</b> Hoàn phí sẽ làm giảm <span class="mono">Thực thu</span>.
                 </div>
               </div>
             </div>
           </div>
         </div>

         <div class="modal-f">
           <button class="btn ghost" @click="closeModal('modalRefund')">
             <i class="fa-solid fa-ban"></i> Hủy
           </button>
-          <button class="btn primary" @click="saveRefund">
+          <button v-if="canRefundContract" class="btn primary" @click="saveRefund">
             <i class="fa-solid fa-check"></i> Xác nhận hoàn
           </button>
         </div>
       </div>
     </div>

     <!-- MODAL: ADJUST -->
     <div class="modal" :class="{ show: showModal === 'modalAdjust' }" @click.self="closeModal('modalAdjust')">
       <div class="modal-card">
         <div class="modal-h">
           <div class="modal-title">
             <i class="fa-solid fa-sliders"></i>
             Điều chỉnh hợp đồng
           </div>
           <button class="x" @click="closeModal('modalAdjust')">
             <i class="fa-solid fa-xmark"></i>
           </button>
         </div>

         <div class="modal-b">
           <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
             <div class="card">
               <div class="card-h"><i class="fa-solid fa-pen-to-square"></i> Thông tin điều chỉnh</div>

               <div class="field">
@@ -914,51 +917,51 @@
                     <div class="k"><span class="dot"></span>Giá sau giảm</div>
                     <div class="v price p4">{{ formatMoney(currentContract?.giaSauGiam || 0) }}</div>
                   </div>
                   <div class="kpi">
                     <div class="k"><span class="dot"></span>Tổng điều chỉnh</div>
                     <div class="v price p2">{{ formatMoney(getTongDieuChinh(currentContract)) }}</div>
                   </div>
                   <div class="kpi">
                     <div class="k"><span class="dot"></span>Doanh thu</div>
                     <div class="v price p1">{{ formatMoney(getDoanhThuRow(currentContract)) }}</div>
                   </div>
                   <div class="kpi">
                     <div class="k"><span class="dot"></span>Doanh số</div>
                     <div class="v price p3">{{ formatMoney(getDoanhSoRow(currentContract)) }}</div>
                   </div>
                 </div>
               </div>
             </div>
           </div>
         </div>

         <div class="modal-f">
           <button class="btn ghost" @click="closeModal('modalAdjust')">
             <i class="fa-solid fa-ban"></i> Hủy
           </button>
-          <button class="btn primary" @click="saveAdjustment">
+          <button v-if="canAdjustContract" class="btn primary" @click="saveAdjustment">
             <i class="fa-solid fa-check"></i> Xác nhận điều chỉnh
           </button>
         </div>
       </div>
     </div>

     <!-- MODAL: DETAIL -->
     <div class="modal" :class="{ show: showModal === 'modalDetail' }" @click.self="closeModal('modalDetail')">
       <div class="modal-card detail">
         <div class="modal-h">
           <div class="modal-title flex items-center gap-2">
             <i class="fa-solid fa-file-lines"></i>
             <span>Chi tiết hợp đồng {{ detailContract?.maHopDong }}</span>
             <span v-if="detailContract?.trangThaiHopDong === 'DANG_HIEU_LUC'" class="status st-on">
               Đang hiệu lực
                       </span>
             <span v-else-if="detailContract?.trangThaiHopDong === 'HOAN_TAT'" class="status st-done">
               Hoàn tất
                       </span>
             <span v-else-if="detailContract?.trangThaiHopDong === 'HUY'" class="status st-cancel">
               Đã hủy
             </span>
           </div>
           <button class="x" @click="closeModal('modalDetail')">
             <i class="fa-solid fa-xmark"></i>
@@ -1108,113 +1111,118 @@
                       </tr>
                       </thead>
                       <tbody>
                       <tr v-if="!detailContract?.dieuChinhHopDongs?.length">
                         <td colspan="4">
                           <div class="text-center py-6 muted">Chưa có điều chỉnh.</div>
                         </td>
                       </tr>
                       <tr v-for="adj in detailContract?.dieuChinhHopDongs || []" :key="adj.id">
                         <td class="mono">{{ formatDateValue(adj.ngayTao) }}</td>
                         <td class="mono">{{ formatMoney(adj.soTienDieuChinh) }}</td>
                         <td class="mono">{{ adj.loaiDieuChinh || '-' }}</td>
                         <td>{{ adj.lyDo || '' }}</td>
                       </tr>
                       </tbody>
                     </table>
                   </div>
                 </div>
               </div>
             </div>
           </div>
         </div>

         <div class="modal-f">
           <button
-            v-if="detailContract?.trangThaiHopDong === 'DANG_HIEU_LUC'"
+            v-if="detailContract?.trangThaiHopDong === 'DANG_HIEU_LUC' && canCancelContract"
             class="btn danger"
             @click="cancelContract"
           >
             <i class="fa-solid fa-ban"></i> Hủy hợp đồng
           </button>
           <button class="btn ghost" @click="closeModal('modalDetail')">
             <i class="fa-solid fa-xmark"></i> Đóng
           </button>
         </div>
       </div>
     </div>

     <!-- MODAL: DELETE -->
     <div class="modal" :class="{ show: showModal === 'modalDelete' }" @click.self="closeModal('modalDelete')">
       <div class="modal-card">
         <div class="modal-h">
           <div class="modal-title">
             <i class="fa-solid fa-triangle-exclamation"></i>
             Xác nhận xóa
           </div>
           <button class="x" @click="closeModal('modalDelete')">
             <i class="fa-solid fa-xmark"></i>
           </button>
         </div>
         <div class="modal-b">
           <div class="p-2">
             <div class="font-extrabold">Xóa hợp đồng {{ currentContract?.maHopDong }}?</div>
             <div class="muted mt-2">{{ currentContract?.tenKhachHang }} • {{ currentContract?.tenDichVu }} • Doanh thu hiện tại: {{ formatMoney(getDoanhThu(currentContract)) }}</div>
             <div class="note mt-3">
               Xóa sẽ mất cả các đợt <b>đóng phí</b>, <b>hoàn phí</b>, <b>điều chỉnh</b> của hợp đồng này.
             </div>
           </div>
         </div>
         <div class="modal-f">
           <button class="btn ghost" @click="closeModal('modalDelete')">
             <i class="fa-solid fa-ban"></i> Hủy
           </button>
-          <button class="btn danger" @click="confirmDelete">
+          <button v-if="canDeleteContract" class="btn danger" @click="confirmDelete">
             <i class="fa-solid fa-trash"></i> Xóa luôn
           </button>
         </div>
       </div>
     </div>
   </div>
 </template>

 <script setup>
 import { ref, computed, watch, onMounted, onUnmounted } from 'vue'
 import api from '/src/api/api.js'
 import { useAuthStore } from '../../stores/authStore'
 import {
   confirmWithInput,
   showCenterWarning,
   showError,
   showLoading,
   updateAlertError,
   updateAlertSuccess
 } from '/src/assets/js/alertService.js'
 import ContractStatsDashboard from "../thiet-kegiandien/ContractStatsDashboard.vue";
 import {shortenName} from "../../assets/js/global.js";
 const authStore = useAuthStore()
 const info = computed(() => authStore.userInfo || {})
+const canPayContract = computed(() => authStore.hasPermission('HOPDONG_THU'))
+const canRefundContract = computed(() => authStore.hasPermission('HOPDONG_HOANPHI'))
+const canAdjustContract = computed(() => authStore.hasPermission('HOPDONG_DIEUCHINH'))
+const canDeleteContract = computed(() => authStore.hasPermission('HOPDONG_DELETE'))
+const canCancelContract = computed(() => authStore.hasPermission('HOPDONG_HUY'))
 const todayISO = () => {
   const d = new Date()
   const yyyy = d.getFullYear()
   const mm = String(d.getMonth() + 1).padStart(2, '0')
   const dd = String(d.getDate()).padStart(2, '0')
   return `${yyyy}-${mm}-${dd}`
 }
 // Constants
 const ENUM_STATUS = ['DANG_HIEU_LUC', 'HOAN_TAT', 'HUY']
 const ENUM_PAY = ['TIEN_MAT', 'CHUYEN_KHOAN', 'QR', 'KHAC']
 const ENUM_ADJ = ['GIAM_GIA', 'PHU_THU', 'PHAT', 'CHUYEN_DOI_DV']

 // State
 const activeTab = ref(1)
 const contracts = ref([])
 const totalElements = ref(0)
 const totalPages = ref(1)
 const seq = ref(1)
 const services = ref([])
 const segments = ref([])

 // Filters
 const searchQuery = ref('')
 const filterService = ref(null)
 const filterStatus = ref(null)
