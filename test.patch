diff --git a/src/components/dich-vu/Phi-dich-vu.vue b/src/components/dich-vu/Phi-dich-vu.vue
index 53ef3c6585b741b4a4f8c5b82a07bc5a8e94909d..dacd2c04716654c5063da94835f599a4a797e306 100644
--- a/src/components/dich-vu/Phi-dich-vu.vue
+++ b/src/components/dich-vu/Phi-dich-vu.vue
@@ -4,203 +4,210 @@
     <div class="topbar">
       <div class="brand">
         <div class="brand-ico">
           <i class="fa-solid fa-file-signature"></i>
         </div>
         <div class="min-w-0">
           <div class="brand-title">Quản lý Hợp đồng</div>
           <div class="brand-sub">Upgrade Demo UI • Responsive • Không sửa HĐ • Có xem chi tiết</div>
         </div>
       </div>

       <div class="top-actions">
         <button class="btn primary" @click="openModal('modalContract')">
           <i class="fa-solid fa-plus"></i>
           <span>Thêm hợp đồng</span>
         </button>
       </div>
     </div>

     <!-- TABS -->
     <div class="tabs-shell">
       <div class="tabs">
         <div class="tab" :class="{ active: activeTab === 1 }" @click="activeTab = 1">
           <i class="fa-solid fa-layer-group"></i>
           Danh sách & thao tác
-          <span class="pill">{{ filteredContracts.length }}</span>
+          <span class="pill">{{ totalElements }}</span>
         </div>

         <div class="tab" :class="{ active: activeTab === 2 }" @click="activeTab = 2">
           <i class="fa-solid fa-chart-line"></i>
           Thống kê
           <span class="pill">0</span>
         </div>
       </div>

       <!-- PANEL TAB 1 -->
       <div class="panel attached" v-show="activeTab === 1">
         <div class="panel-h">
           <div class="tools">
-            <div class="input">
+            <div class="input filter-item filter-search" :class="{ active: searchQuery }">
               <i class="fa-solid fa-magnifying-glass"></i>
               <input v-model="searchQuery" type="text" placeholder="Tìm theo mã HĐ / khách / người tạo...">
             </div>

-            <div class="select">
+            <div class="select filter-item filter-service" :class="{ active: filterService }">
               <label>Dịch vụ</label>
               <select v-model="filterService">
-                <option value="">Tất cả</option>
-                <option v-for="service in serviceOptions" :key="service.id || service.name" :value="service.name">{{ service.name }}</option>
+                <option :value="null">Tất cả</option>
+                <option v-for="service in serviceOptions" :key="service.id || service.name" :value="service.id || service.name">{{ service.name }}</option>
               </select>
             </div>

-            <div class="select">
+            <div class="select filter-item filter-status" :class="{ active: filterStatus }">
               <label>Trạng thái</label>
               <select v-model="filterStatus">
-                <option value="">Tất cả</option>
+                <option :value="null">Tất cả</option>
                 <option value="DANG_HIEU_LUC">DANG_HIEU_LUC</option>
                 <option value="HOAN_TAT">HOAN_TAT</option>
                 <option value="HUY">HUY</option>
               </select>
             </div>
           </div>
         </div>

         <div class="panel-b">
           <!-- KPIs -->
           <div class="kpi-row">
             <div class="kpi">
               <div class="k"><span class="dot"></span>Tổng hợp đồng</div>
-              <div class="v price p4">{{ filteredContracts.length }}</div>
+              <div class="v price p4">{{ totalElements }}</div>
             </div>
             <div class="kpi">
-              <div class="k"><span class="dot"></span>Tổng thực thu</div>
-              <div class="v price p3">{{ formatMoney(totalThucThu) }}</div>
+              <div class="k"><span class="dot"></span>Tổng doanh thu</div>
+              <div class="v price p3">{{ formatMoney(totalDoanhThu) }}</div>
             </div>
             <div class="kpi">
               <div class="k"><span class="dot"></span>Tổng điều chỉnh</div>
               <div class="v price p2">{{ formatMoney(totalDieuChinh) }}</div>
             </div>
             <div class="kpi">
-              <div class="k"><span class="dot"></span>Tổng doanh thu (min)</div>
-              <div class="v price p1">{{ formatMoney(totalDoanhThu) }}</div>
+              <div class="k"><span class="dot"></span>Tổng doanh số</div>
+              <div class="v price p1">{{ formatMoney(totalDoanhSo) }}</div>
             </div>
           </div>

           <div class="table-wrap">
             <div class="table-scroll">
               <table>
                 <thead>
                 <tr>
                   <th style="width:150px">Mã HĐ</th>
                   <th>Khách hàng</th>
                   <th style="width:260px">Dịch vụ</th>
+                  <th style="width:160px">Giá tài sản ký HĐ</th>
                   <th style="width:140px">Giá sau giảm</th>
-                  <th style="width:140px">Thực thu</th>
                   <th style="width:140px">Doanh thu</th>
+                  <th style="width:140px">Doanh số</th>
                   <th style="width:120px">Trạng thái</th>
                   <th style="width:160px">Nhân viên tạo</th>
                   <th style="width:160px">Ngày tạo</th>
                   <th style="width:230px">Thao tác</th>
                 </tr>
                 </thead>
                 <tbody>
-                <tr v-if="filteredContracts.length === 0">
-                  <td colspan="10">
+                <tr v-if="contracts.length === 0">
+                  <td colspan="11">
                     <div class="text-center py-10">
                       <div class="mx-auto w-12 h-12 rounded-2xl grid place-items-center text-white shadow-lg" style="background: var(--primary-gradient);">
                         <i class="fa-solid fa-face-smile"></i>
                       </div>
                       <div class="mt-3 font-extrabold">Chưa có dữ liệu</div>
                       <div class="mt-2 muted">File upgrade đã có sẵn 3 hợp đồng mẫu. Nếu bạn xoá hết, hãy bấm "Tạo dữ liệu mẫu".</div>
                     </div>
                   </td>
                 </tr>
-                <tr v-for="contract in paginatedContracts" :key="contract.id">
+                <tr v-for="contract in contracts" :key="contract.id">
                   <td>
                     <div class="font-extrabold mono">{{ contract.maHopDong }}</div>
                     <div class="muted tiny">ID KH: {{ contract.maKhachHang }}</div>
                   </td>
                   <td>
                     <div class="font-bold">{{ contract.tenKhachHang }}</div>
                   </td>
                   <td>
                     <div class="font-extrabold">{{ contract.tenDichVu }}</div>
                     <div class="muted tiny">Giá gốc: <span class="mono">{{ formatMoney(contract.giaDichVuGoc) }}</span></div>
                   </td>
+                  <td>
+                    <div class="price p2">{{ formatMoney(getGiaTaiSanKy(contract)) }}</div>
+                  </td>
                   <td>
                     <div class="price p4">{{ formatMoney(contract.giaSauGiam) }}</div>
+                    <div class="muted tiny">Giảm: <span class="mono">{{ formatMoney(getGiaGiam(contract)) }}</span></div>
                   </td>
                   <td>
-                    <div class="price p3">{{ formatMoney(calcThucThu(contract)) }}</div>
+                    <div class="price p3">{{ formatMoney(getDoanhThu(contract)) }}</div>
+                    <div class="muted tiny">Tổng hoàn: <span class="mono">{{ formatMoney(getTongHoan(contract)) }}</span></div>
                   </td>
                   <td>
-                    <div class="price p1">{{ formatMoney(calcDoanhThu(contract)) }}</div>
+                    <div class="price p1">{{ formatMoney(getDoanhSo(contract)) }}</div>
+                    <div class="muted tiny">Tổng điều chỉnh: <span class="mono">{{ formatMoney(getTongDieuChinh(contract)) }}</span></div>
                   </td>
                   <td>
                       <span v-if="contract.trangThaiHopDong === 'DANG_HIEU_LUC'" class="status st-on">
                         <i class="fa-solid fa-circle"></i>Đang hiệu lực
                       </span>
                     <span v-else-if="contract.trangThaiHopDong === 'HOAN_TAT'" class="status st-done">
                         <i class="fa-solid fa-circle"></i>Hoàn tất
                       </span>
                     <span v-else-if="contract.trangThaiHopDong === 'HUY'" class="status st-cancel">
                         <i class="fa-solid fa-circle"></i>Đã hủy
                       </span>
                   </td>
                   <td>
                     <div class="font-semibold">{{ contract.nhanVienTao }}</div>
                   </td>
                   <td class="mono">{{ formatCreatedAt(contract.ngayTao) }}</td>
                   <td>
                     <div class="actions">
                       <div class="icon-btn icon-view" title="Xem chi tiết" @click="openDetail(contract)">
                         <i class="fa-solid fa-eye"></i>
                       </div>
                       <div class="icon-btn icon-pay" title="Đóng phí" @click="openPay(contract)">
                         <i class="fa-solid fa-circle-dollar-to-slot"></i>
                       </div>
                       <div class="icon-btn icon-refund" title="Hoàn phí" @click="openRefund(contract)">
                         <i class="fa-solid fa-arrow-rotate-left"></i>
                       </div>
                       <div class="icon-btn icon-adjust" title="Điều chỉnh" @click="openAdjust(contract)">
                         <i class="fa-solid fa-sliders"></i>
                       </div>
                       <div class="icon-btn icon-del" title="Xóa" @click="openDelete(contract)">
                         <i class="fa-solid fa-trash"></i>
                       </div>
                     </div>
                   </td>
                 </tr>
                 </tbody>
               </table>
             </div>
           </div>
         </div>
         <div class="pagination">
           <div class="muted tiny">
-            Hiển thị {{ pageStart }}-{{ pageEnd }} / {{ filteredContracts.length }}
+            Hiển thị {{ pageStart }}-{{ pageEnd }} / {{ totalElements }}
           </div>
           <div class="pager">
             <button class="btn ghost btn-page" :disabled="currentPage === 1" @click="prevPage">Trước</button>
             <button
               v-for="page in totalPages"
               :key="page"
               class="btn ghost btn-page"
               :class="{ active: currentPage === page }"
               @click="goToPage(page)"
             >
               {{ page }}
             </button>
             <button class="btn ghost btn-page" :disabled="currentPage === totalPages" @click="nextPage">Sau</button>
           </div>
         </div>
       </div>

       <!-- PANEL TAB 2 -->
       <div class="panel attached" v-show="activeTab === 2">
         <div class="panel-h">
           <div class="panel-title">
             <i class="fa-solid fa-chart-simple"></i>
             Thống kê (để trống)
           </div>
         </div>
@@ -880,97 +887,100 @@
         </div>

         <div class="modal-f">
           <button class="btn ghost" @click="closeModal('modalDetail')">
             <i class="fa-solid fa-xmark"></i> Đóng
           </button>
         </div>
       </div>
     </div>

     <!-- MODAL: DELETE -->
     <div class="modal" :class="{ show: showModal === 'modalDelete' }" @click.self="closeModal('modalDelete')">
       <div class="modal-card">
         <div class="modal-h">
           <div class="modal-title">
             <i class="fa-solid fa-triangle-exclamation"></i>
             Xác nhận xóa
           </div>
           <button class="x" @click="closeModal('modalDelete')">
             <i class="fa-solid fa-xmark"></i>
           </button>
         </div>
         <div class="modal-b">
           <div class="p-2">
             <div class="font-extrabold">Xóa hợp đồng {{ currentContract?.maHopDong }}?</div>
-            <div class="muted mt-2">{{ currentContract?.tenKhachHang }} • {{ currentContract?.tenDichVu }} • Doanh thu hiện tại: {{ formatMoney(calcDoanhThu(currentContract)) }}</div>
+            <div class="muted mt-2">{{ currentContract?.tenKhachHang }} • {{ currentContract?.tenDichVu }} • Doanh thu hiện tại: {{ formatMoney(getDoanhThu(currentContract)) }}</div>
             <div class="note mt-3">
               Xóa sẽ mất cả các đợt <b>đóng phí</b>, <b>hoàn phí</b>, <b>điều chỉnh</b> của hợp đồng này.
             </div>
           </div>
         </div>
         <div class="modal-f">
           <button class="btn ghost" @click="closeModal('modalDelete')">
             <i class="fa-solid fa-ban"></i> Hủy
           </button>
           <button class="btn danger" @click="confirmDelete">
             <i class="fa-solid fa-trash"></i> Xóa luôn
           </button>
         </div>
       </div>
     </div>
   </div>
 </template>

 <script>
 import api from '/src/api/api.js'
 import { showError, showLoading, updateAlertError, updateAlertSuccess } from '/src/assets/js/alertService.js'

 export default {
   name: 'ContractManagement',

   data() {
     return {
       // Constants
       ENUM_STATUS: ['DANG_HIEU_LUC', 'HOAN_TAT', 'HUY'],
       ENUM_PAY: ['TIEN_MAT', 'CHUYEN_KHOAN', 'QR', 'KHAC'],
       ENUM_ADJ: ['GIAM_GIA', 'PHU_THU', 'PHAT'],

       // State
       activeTab: 1,
       contracts: [],
+      totalElements: 0,
+      totalPages: 1,
       seq: 1,
       services: [],
       segments: [],

       // Filters
       searchQuery: '',
-      filterService: '',
-      filterStatus: '',
+      filterService: null,
+      filterStatus: null,
       currentPage: 1,
       pageSize: 2,
       currentUserName: 'Nguyễn Minh',
+      searchTimer: null,

       // Customer search
       customerSearch: '',
       selectedCustomer: null,
       customerSearchResults: [],
       customerSearchLoading: false,
       customerSearchError: '',
       customerSearchTimer: null,
       lastCustomerKeyword: '',
       suppressCustomerSearch: false,

       // New contract form
       newContract: {
         maHopDong: '',
         maKhachHang: '',
         tenKhachHang: '',
         tenDichVu: '',
         serviceId: null,
         giaTriTaiSan: null,
         giaDichVuGoc: 0,
         phiGiam: 0,
         discountMode: 'PERCENT',
         discountValue: 0,
         giaSauGiam: 0,
         trangThaiHopDong: 'DANG_HIEU_LUC',
@@ -996,148 +1006,137 @@ export default {
       refund: {
         amount: 0,
         date: this.todayISO(),
         reason: ''
       },

       // Adjustment form
       adjustment: {
         amount: 0,
         type: 'GIAM_GIA',
         reason: ''
       },

       // Toast
       showToast: false,
       toast: {
         type: 'info',
         title: '',
         text: '',
         icon: 'fa-solid fa-circle-info'
       }
     }
   },

   computed: {
-    filteredContracts() {
-      return this.contracts.filter(contract => {
-        const hay = `${contract.maHopDong} ${contract.tenKhachHang} ${contract.tenDichVu} ${contract.nhanVienTao || ''}`.toLowerCase()
-        const okQ = !this.searchQuery || hay.includes(this.searchQuery.toLowerCase())
-        const okSvc = !this.filterService || contract.tenDichVu === this.filterService
-        const okSt = !this.filterStatus || contract.trangThaiHopDong === this.filterStatus
-        return okQ && okSvc && okSt
-      })
-    },
-
-    totalPages() {
-      return Math.max(1, Math.ceil(this.filteredContracts.length / this.pageSize))
-    },
-
-    paginatedContracts() {
-      const start = (this.currentPage - 1) * this.pageSize
-      return this.filteredContracts.slice(start, start + this.pageSize)
-    },
-
     pageStart() {
-      if (!this.filteredContracts.length) return 0
+      if (!this.totalElements) return 0
       return (this.currentPage - 1) * this.pageSize + 1
     },

     pageEnd() {
-      return Math.min(this.currentPage * this.pageSize, this.filteredContracts.length)
+      return Math.min(this.currentPage * this.pageSize, this.totalElements)
     },

-    totalThucThu() {
-      return this.filteredContracts.reduce((sum, c) => sum + this.calcThucThu(c), 0)
+    totalDoanhThu() {
+      return this.contracts.reduce((sum, c) => sum + this.getDoanhThu(c), 0)
     },

     totalDieuChinh() {
-      return this.filteredContracts.reduce((sum, c) => sum + this.calcTongDieuChinh(c), 0)
+      return this.contracts.reduce((sum, c) => sum + this.getTongDieuChinh(c), 0)
     },

-    totalDoanhThu() {
-      return this.filteredContracts.reduce((sum, c) => sum + this.calcDoanhThu(c), 0)
+    totalDoanhSo() {
+      return this.contracts.reduce((sum, c) => sum + this.getDoanhSo(c), 0)
     },

     serviceOptions() {
       return this.services
     },

     selectedService() {
       if (!this.newContract.serviceId) return null
       return this.serviceOptions.find(s => String(s.id || s.name) === String(this.newContract.serviceId)) || null
     },

     matchingSegment() {
       const serviceId = this.newContract.serviceId
       const assetValue = Number(this.newContract.giaTriTaiSan || 0)
       if (!serviceId || assetValue <= 0) return null
       return this.segments.find(seg =>
           String(seg.serviceId) === String(serviceId) &&
           assetValue >= Number(seg.min) &&
           assetValue < Number(seg.max)
       ) || null
     },

     segmentHint() {
       if (!this.newContract.serviceId) {
         return 'Vui lòng chọn dịch vụ để hiển thị phân khúc.'
       }
       if (!this.newContract.giaTriTaiSan) {
         return 'Nhập giá trị tài sản để xác định mức giá gốc.'
       }
       if (!this.matchingSegment) {
         return 'Chưa có phân khúc phù hợp với giá trị tài sản này.'
       }
       return `Phân khúc ${this.formatMoney(this.matchingSegment.min)} → ${this.formatMoney(this.matchingSegment.max)}`
     },

     firstPaymentAmount() {
       if (this.newContract.initPlan === 'FULL') {
         return this.newContract.giaSauGiam
       } else {
         const percent = Math.max(0, Math.min(100, this.newContract.tiLeCoc || 0))
         return Math.round(this.newContract.giaSauGiam * (percent / 100))
       }
     }
   },

   watch: {
-    filteredContracts() {
-      this.currentPage = Math.min(this.currentPage, this.totalPages)
-    },
-
     searchQuery() {
       this.currentPage = 1
+      this.queueSearch()
     },

     filterService() {
       this.currentPage = 1
+      this.fetchContracts()
     },

     filterStatus() {
       this.currentPage = 1
+      this.fetchContracts()
+    },
+
+    currentPage() {
+      this.fetchContracts()
+    },
+
+    pageSize() {
+      this.currentPage = 1
+      this.fetchContracts()
     },

     customerSearch(val) {
       if (this.suppressCustomerSearch) return

       if (this.selectedCustomer && (val || '').trim() === (this.selectedCustomer.name || '').trim()) {
         this.customerSearchResults = []
         this.customerSearchLoading = false
         this.customerSearchError = ''
         return
       }

       if (this.selectedCustomer && (val || '').trim() !== (this.selectedCustomer?.name || '').trim()) {
         this.selectedCustomer = null
         this.newContract.maKhachHang = ''
         this.newContract.tenKhachHang = ''
       }

       this.clearCustomerSearchTimer()

       const k = (val || '').trim()
       if (!k) {
         this.lastCustomerKeyword = ''
         this.customerSearchResults = []
         this.customerSearchError = ''
@@ -1197,93 +1196,163 @@ export default {
       const mm = String(d.getMonth() + 1).padStart(2, '0')
       const dd = String(d.getDate()).padStart(2, '0')
       return `${yyyy}-${mm}-${dd}`
     },

     formatCreatedAt(value) {
       if (!value) return '-'
       if (typeof value === 'string') {
         const parts = value.split(',')
         if (parts.length === 2) {
           const datePart = parts[0].trim()
           const timePart = parts[1].trim()
           if (timePart && datePart) return `${timePart} ${datePart}`
         }
         if (/\d{1,2}:\d{2}:\d{2}/.test(value) && /\d{1,2}\/\d{1,2}\/\d{4}/.test(value)) {
           return value
         }
       }
       const parsed = value instanceof Date ? value : new Date(value)
       if (!Number.isNaN(parsed.getTime())) {
         return `${parsed.toLocaleTimeString('vi-VN')} ${parsed.toLocaleDateString('vi-VN')}`
       }
       return String(value)
     },

+    getGiaGiam(contract) {
+      return Number(contract?.giaGiam ?? contract?.phiGiam ?? 0)
+    },
+
+    getGiaTaiSanKy(contract) {
+      return Number(contract?.giaTaiSanKyGoc ?? contract?.giaTriTaiSan ?? contract?.giaTriKyBan ?? 0)
+    },
+
+    getTongHoan(contract) {
+      if (contract?.giaHoanTien !== undefined && contract?.giaHoanTien !== null) {
+        return Number(contract.giaHoanTien || 0)
+      }
+      return this.calcTongHoan(contract)
+    },
+
+    getTongDieuChinh(contract) {
+      if (contract?.tongDC !== undefined && contract?.tongDC !== null) {
+        return Number(contract.tongDC || 0)
+      }
+      return this.calcTongDieuChinh(contract)
+    },
+
+    getDoanhThu(contract) {
+      if (contract?.doanhThu !== undefined && contract?.doanhThu !== null) {
+        return Number(contract.doanhThu || 0)
+      }
+      return this.calcThucThu(contract)
+    },
+
+    getDoanhSo(contract) {
+      if (contract?.doanhSo !== undefined && contract?.doanhSo !== null) {
+        return Number(contract.doanhSo || 0)
+      }
+      return this.calcDoanhThu(contract)
+    },
+
     randInt(min, max) {
       return Math.floor(Math.random() * (max - min + 1)) + min
     },

     randPriceForService(serviceName) {
       const svc = this.serviceOptions.find(s => s.name === serviceName) || this.serviceOptions[0]
       if (!svc) return 0
       const min = Number(svc.minPrice ?? svc.min ?? 0)
       const max = Number(svc.maxPrice ?? svc.max ?? min)
       if (!min || !max) return 0
       const step = 250000
       const raw = this.randInt(min, max)
       return Math.round(raw / step) * step
     },

     pad4(n) {
       return String(n).padStart(4, '0')
     },

     async fetchServices() {
       try {
         const res = await api.get('/dich-vu-thg/admin', {
           params: {
             keyword: null
           }
         })
         this.services = res.data || []
       } catch (e) {
         console.error('❌ Lỗi fetch services', e)
         this.services = []
       }
     },

     async fetchSegments() {
       try {
         const res = await api.get('/dich-vu-thg/admin/phan-khuc')
         this.segments = res.data || []
       } catch (e) {
         console.error('❌ Lỗi fetch segments', e)
         this.segments = []
       }
     },

+    queueSearch() {
+      if (this.searchTimer) clearTimeout(this.searchTimer)
+      this.searchTimer = setTimeout(() => {
+        this.fetchContracts()
+      }, 300)
+    },
+
+    async fetchContracts() {
+      const payload = {
+        keyword: this.searchQuery || null,
+        serviceId: this.filterService || null,
+        trangThaiHopDong: this.filterStatus || null,
+        page: this.currentPage,
+        size: this.pageSize
+      }
+
+      try {
+        const res = await api.post('/hop-dong/admin/search', payload)
+        const page = res?.data || {}
+        const items = Array.isArray(page.content) ? page.content : []
+        this.contracts = items
+        this.totalElements = Number(page.totalElements ?? items.length)
+        this.totalPages = Number(page.totalPages ?? Math.max(1, Math.ceil(this.totalElements / this.pageSize)))
+        if (this.currentPage > this.totalPages) {
+          this.currentPage = this.totalPages || 1
+        }
+      } catch (e) {
+        console.error('❌ Lỗi fetch contracts', e)
+        this.contracts = []
+        this.totalElements = 0
+        this.totalPages = 1
+      }
+    },
+
     getServiceById(serviceId) {
       return this.serviceOptions.find(s => String(s.id || s.name) === String(serviceId)) || null
     },

     getSegmentsByService(serviceId) {
       return this.segments
           .filter(seg => String(seg.serviceId) === String(serviceId))
           .sort((a, b) => Number(a.min) - Number(b.min))
     },

     findSegmentForAsset(serviceId, assetValue) {
       if (!serviceId || !assetValue) return null
       const segments = this.getSegmentsByService(serviceId)
       return segments.find(seg =>
           assetValue >= Number(seg.min) && assetValue < Number(seg.max)
       ) || null
     },

     genContractCode() {
       const y = new Date().getFullYear()
       return `HD-${y}-${this.pad4(this.seq++)}`
     },

     // Calculation functions
     calcTongDong(c) {
@@ -1533,51 +1602,51 @@ export default {
           giaSauGiam: created.giaSauGiam ?? this.newContract.giaSauGiam,
           trangThaiHopDong: created.trangThaiHopDong ?? this.newContract.trangThaiHopDong,
           ngayKy: created.ngayKy ?? this.newContract.ngayKy ?? this.todayISO(),
           ngayTao: created.ngayTao ?? new Date().toLocaleString('vi-VN'),
           dotDongTien: hasPayments ? created.dotDongTien : [],
           hoanTien: created.hoanTien || [],
           dieuChinh: created.dieuChinh || [],
           initPlan: created.initPlan ?? this.newContract.initPlan,
           tiLeCoc: created.tiLeCoc ?? (this.newContract.initPlan === 'COC' ? (this.newContract.tiLeCoc || 0) : null)
         }

         if (!hasPayments && this.firstPaymentAmount > 0) {
           contract.dotDongTien.push({
             id: crypto.randomUUID(),
             soTienDong: this.firstPaymentAmount,
             hinhThucThanhToan: this.newContract.firstMethod,
             ngayDongTien: contract.ngayKy,
             ghiChu: this.newContract.initPlan === 'FULL' ?
                 'Thanh toán đủ (tạo khi lập HĐ)' :
                 `Cọc ${this.newContract.tiLeCoc || 0}% (tạo khi lập HĐ)`,
             nguoiGhiNhan: 'demo_admin',
             ngayTao: new Date().toLocaleString('vi-VN')
           })
         }

-        this.contracts.unshift(contract)
+        await this.fetchContracts()
         updateAlertSuccess('Đã tạo hợp đồng',
             `${contract.maHopDong} • ${this.newContract.initPlan === 'FULL' ? 'Đóng tất' : 'Cọc'}: ${this.formatMoney(this.firstPaymentAmount)}`)
         this.closeModal('modalContract')

       } catch (error) {
         console.error('❌ Lỗi tạo hợp đồng', error)
         updateAlertError('Tạo hợp đồng thất bại', 'Vui lòng thử lại sau.')
       }
     },

     // Payment management
     openPay(contract) {
       this.currentContract = contract
       this.payment = {
         amount: 0,
         method: 'CHUYEN_KHOAN',
         date: this.todayISO(),
         note: ''
       }
       this.openModal('modalPay')
     },

     savePayment() {
       if (this.payment.amount <= 0) {
         this.showToastMessage('error', 'Số tiền không hợp lệ', 'Số tiền đóng phải > 0.')
@@ -1681,53 +1750,54 @@ export default {
           `${this.adjustment.amount > 0 ? '+' : ''}${this.formatMoney(this.adjustment.amount)} (${this.adjustment.type})`)
       this.closeModal('modalAdjust')
     },

     // Detail view
     openDetail(contract) {
       this.currentContract = contract
       this.openModal('modalDetail')
     },

     // Delete management
     openDelete(contract) {
       this.currentContract = contract
       this.openModal('modalDelete')
     },

     confirmDelete() {
       this.contracts = this.contracts.filter(c => c.id !== this.currentContract.id)
       this.showToastMessage('success', 'Đã xóa', `Đã xóa ${this.currentContract.maHopDong}`)
       this.closeModal('modalDelete')
     },

     // Filters
     resetFilters() {
       this.searchQuery = ''
-      this.filterService = ''
-      this.filterStatus = ''
+      this.filterService = null
+      this.filterStatus = null
       this.currentPage = 1
+      this.fetchContracts()
       this.showToastMessage('info', 'Đã reset lọc', 'Hiển thị toàn bộ hợp đồng.')
     },

     goToPage(page) {
       const next = Math.min(this.totalPages, Math.max(1, page))
       this.currentPage = next
     },

     nextPage() {
       this.goToPage(this.currentPage + 1)
     },

     prevPage() {
       this.goToPage(this.currentPage - 1)
     },

     // Seed data
     seedMock() {
       const names = ['Nguyễn Văn A', 'Trần Thị B', 'Lê Hoàng C', 'Phạm Minh D', 'Võ Thúy E', 'Đặng Quốc F']
       const staffNames = ['Nguyễn Minh', 'Trần Hà', 'Phạm Quân', 'Lê Thu']
       const serviceList = this.serviceOptions

       if (!serviceList.length) {
         this.showToastMessage('error', 'Thiếu dữ liệu', 'Chưa tải được danh sách dịch vụ.')
         return
@@ -1920,51 +1990,51 @@ export default {
         })

         // Add extra payment if HOAN_TAT and not FULL
         if (x.trangThaiHopDong === 'HOAN_TAT' && x.initPlan !== 'FULL') {
           const remain = Math.max(0, giaSau - amount)
           if (remain > 0) {
             contract.dotDongTien.push({
               id: crypto.randomUUID(),
               soTienDong: remain,
               hinhThucThanhToan: 'CHUYEN_KHOAN',
               ngayDongTien: x.ngayKy,
               ghiChu: 'Đóng nốt (mẫu)',
               nguoiGhiNhan: 'demo_admin',
               ngayTao: new Date().toLocaleString('vi-VN')
             })
           }
         }

         return contract
       })
     }
   },

   async mounted() {
     await Promise.all([this.fetchServices(), this.fetchSegments()])
-    this.init3Samples()
+    await this.fetchContracts()
     this.resetContractForm()
   }
 }
 </script>

 <style scoped>
 /* CSS styles from original file - với chỉnh sửa cho 5 nút thao tác */
 .ui-page{
   --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
   --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
   --success-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
   --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
   --danger-gradient: linear-gradient(135deg, #ff5858 0%, #f09819 100%);
   --info-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
   --dark-gradient: linear-gradient(135deg, #141e30 0%, #243b55 100%);
   --light-gradient: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);

   --primary-color: #667eea;
   --secondary-color: #f093fb;
   --success-color: #43e97b;
   --warning-color: #fa709a;
   --danger-color: #ff5858;
   --info-color: #4facfe;
   --dark-color: #141e30;
   --light-color: #f8f9fa;
@@ -2201,50 +2271,61 @@ export default {
 ========================= */
 .tools{
   display:grid;
   grid-template-columns: 1.2fr 220px 190px auto;
   gap: 10px;
   align-items:end;
   width: 100%;
   max-width: 980px;
   margin-left: auto;
 }
 @media (max-width: 1100px){
   .tools{ grid-template-columns: 1fr 220px 190px; }
   .tools .tools-actions{ grid-column: 1 / -1; justify-content:flex-end; }
 }
 @media (max-width: 720px){
   .tools{ grid-template-columns: 1fr; max-width: 100%; }
   .tools .tools-actions{ justify-content: stretch; }
   .tools .tools-actions .btn{ width: 100%; justify-content:center; }
 }

 .input{
   position:relative;
   width: 100%;
   min-width: 0;
 }
+.filter-item input,
+.filter-item select{
+  background: linear-gradient(135deg, rgba(102,126,234,.08), rgba(79,172,254,.06)) !important;
+}
+.filter-search input{ border-color: rgba(79,172,254,.35); }
+.filter-service select{ border-color: rgba(240,147,251,.35); }
+.filter-status select{ border-color: rgba(67,233,123,.35); }
+.filter-item.active input,
+.filter-item.active select{
+  box-shadow: 0 0 0 4px rgba(102,126,234,.16);
+}
 .input i{
   position:absolute;
   left: 10px;
   top: 50%;
   transform: translateY(-50%);
   font-size: 12px;
   color: rgba(20,30,48,.55);
 }
 .input input{
   width:100%;
   height: 36px;
   padding: 0 10px 0 32px;
   border-radius: 12px;
   border: 1px solid rgba(20,30,48,.14);
   background: #fff;
   outline:none;
   font-size: 13px;
   font-weight: 650;
   transition: var(--t);
   color:#000;
   min-width: 0;
 }
 .input input:focus{
   border-color: rgba(79,172,254,.55);
   box-shadow: 0 0 0 4px rgba(79,172,254,.14);
