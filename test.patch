diff --git a/src/components/thiet-kegiandien/admin-saleadmin.vue b/src/components/thiet-kegiandien/admin-saleadmin.vue
index cc391ee6e129f71ef84a3fb8fffbb207d23312e8..3e5f02ec8199c8dae30a7c1d91d09dc2584ccebe 100644
--- a/src/components/thiet-kegiandien/admin-saleadmin.vue
+++ b/src/components/thiet-kegiandien/admin-saleadmin.vue
@@ -53,56 +53,69 @@
       <!-- Sidebar -->
       <aside class="sidebar-wrap">
         <div class="sidebar">
           <div class="sidebar-section">
             <h6 class="sidebar-title sidebar-title-icon">
               <i class="fas fa-filter"></i>
               B·ªô l·ªçc n√¢ng cao
             </h6>

             <div class="mb-3">
               <label class="form-label mb-2 fw-medium">Ph√¢n lo·∫°i</label>
               <select class="form-select form-select-custom" v-model="filters.type">
                 <option value="all">T·∫•t c·∫£ ph√¢n lo·∫°i</option>
                 <option value="MOI_GIOI">M√¥i gi·ªõi</option>
                 <option value="CHINH_CHU">Ch·ªß nh√†</option>
                 <option value="NGUOI_THAN">Ng∆∞·ªùi th√¢n</option>
               </select>
             </div>

             <div class="mb-3">
               <label class="form-label mb-2 fw-medium">Tr·∫°ng th√°i</label>
               <select class="form-select form-select-custom" v-model="filters.status">
                 <option value="all">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                 <option value="NEW">M·ªõi nh·∫≠p</option>
                 <option value="DC_TELESALES">Ch·ªù li√™n h·ªá</option>
+                <option value="CHAM_SOC">ChƒÉm s√≥c</option>
                 <option value="TN_7NGAY">Ti·ªÅm nƒÉng 7 ng√†y</option>
                 <option value="TN_14NGAY">Ti·ªÅm nƒÉng 14 ng√†y</option>
                 <option value="THANH_CONG">Th√†nh c√¥ng</option>
+                <option value="TRIEN_KHAI">Tri·ªÉn khai</option>
+                <option value="KHACH_HUY_HEN">Kh√°ch hu·ª∑ h·∫πn</option>
+                <option value="THAT_BAI">Th·∫•t b·∫°i</option>
                 <option value="SAI_SO_LIEU">Sai s·ªë</option>
                 <option value="KHONG_LIEN_LAC_DUOC">Kh√¥ng li√™n l·∫°c</option>
-                <option value="CHAM_SOC">ChƒÉm s√≥c</option>
+              </select>
+            </div>
+
+            <div class="mb-3">
+              <label class="form-label mb-2 fw-medium">Ngu·ªìn</label>
+              <select class="form-select form-select-custom" v-model="filters.resource">
+                <option value="all">T·∫•t c·∫£ ngu·ªìn</option>
+                <option v-for="source in customerSources" :key="source.id" :value="source.id">
+                  {{ source.label }}
+                </option>
               </select>
             </div>

             <div class="mb-3">
               <label class="form-label mb-2 fw-medium">Ng∆∞·ªùi t·∫°o</label>
                 <select v-model="filters.creator" class="form-select form-select-custom ">
                   <option value="all">-- T·∫•t c·∫£ nh√¢n vi√™n --</option>
                   <option
                       v-for="nv in marketingoptions"
                       :key="nv.id"
                       :value="nv.id"
                   >
                     {{ nv.tenNhanVien }}
                   </option>
                 </select>

             </div>

             <div class="mb-3">
               <label class="form-label mb-2 fw-medium">Ng√†y t·∫°o t·ª´ - ƒë·∫øn</label>
               <div class="d-flex gap-2">
                 <input
                   type="date"
                   class="form-control form-control-custom"
                   v-model="filters.createdFrom"
@@ -553,51 +566,51 @@
                             <div class="fw-semibold">{{ shortenName( customer.hoTen, 15 )}}</div>
                             <small class="text-muted">{{ customer.ngayTao }}</small>
                           </div>
                         </div>
                       </td>

                       <!-- SƒêT -->
                       <td class="fw-medium">
                         {{ formatPhoneNumber(customer.soDienThoai) }}
                       </td>

                       <!-- T·ªânh / TP -->
                       <td>
                         {{ getProvinceShortLabel(customer.tinhThanhPho) }}
                       </td>

                       <!-- Ph√¢n lo·∫°i -->
                       <td>
     <span :class="`type-badge type-${customer.phanLoaiKhach}`">
       {{ getTypeLabel(customer.phanLoaiKhach) }}
     </span>
                       </td>

                       <!-- Tr·∫°ng th√°i -->
                       <td>
-    <span :class="`status-badge status-${customer.trangThai}`">
+    <span :class="['status-badge', getStatusClass(customer.trangThai)]">
       {{ getStatusLabel(customer.trangThai) }}
     </span>
                       </td>

                       <!-- Ng√†y c·∫≠p nh·∫≠t -->
                       <td style="width: 120px!important;">
                           <span
                               class="badge bg-light text-dark"
                               style="font-size: 14px !important; font-weight: 500 !important;"
                           >
                             {{ customer.ngayCapNhat || 'Ch∆∞a c√≥' }}
                           </span>
                       </td>

                       <!-- Ng∆∞·ªùi t·∫°o -->
                       <td style="width: 170px!important;">
                         <div
                             class="d-flex align-items-center gap-2"
                             v-if="customer.nhanVienTaoTen"
                         >
                           <img
                               :src="'https://s3.cloudfly.vn/thg-storage-dev/uploads-public/'+ customer.nhanVienTaoAvatar"
                               :alt="customer.nhanVienTaoTen"
                               class="member-avatar"
                           >
@@ -929,51 +942,51 @@
     <!-- Edit Customer Modal -->
     <div v-if="showEditCustomerModal" class="modal fade modal-custom show detail-modal edit-modal" tabindex="-1">
       <div class="modal-dialog modal-xl modal-dialog-centered">
         <div class="modal-content">
           <div class="modal-header">
             <h5 class="modal-title">
               <i class="fas fa-user-edit me-2"></i>
               Ch·ªânh s·ª≠a kh√°ch h√†ng
             </h5>
             <button type="button" class="btn-close btn-close-white" @click="closeEditCustomerModal"></button>
           </div>
           <div class="modal-body">
             <form @submit.prevent="updateCustomer">
               <div class="detail-hero">
                 <div class="detail-avatar">
                   <div class="avatar-img">
                     <img
                         :src="customerForm.avatar || generateAvatarFromName(customerForm.name)"
                         :alt="customerForm.name || 'Kh√°ch h√†ng'"
                     >
                   </div>
                 </div>
                 <div class="detail-hero-info">
                   <div class="detail-hero-title">
                     <h4 class="mb-0">{{ customerForm.name || 'Kh√°ch h√†ng' }}</h4>
-                    <span v-if="customerForm.status" :class="`status-badge status-${customerForm.status}`">
+                    <span v-if="customerForm.status" :class="['status-badge', getStatusClass(customerForm.status)]">
                       {{ getStatusLabel(customerForm.status) }}
                     </span>
                   </div>
                   <div class="detail-hero-meta">
                     <span><i class="fas fa-phone-alt"></i> {{ formatPhoneNumber(customerForm.phone) }}</span>
                     <span><i class="fas fa-map-marker-alt"></i> {{ customerForm.province || '-' }}</span>
                     <span v-if="customerForm.createdAt"><i class="fas fa-calendar-alt"></i> Ng√†y t·∫°o: {{ customerForm.createdAt }}</span>
                   </div>
                   <div class="detail-hero-tags">
                     <span v-if="customerForm.type" :class="`type-badge type-${customerForm.type}`">
                       {{ getTypeLabel(customerForm.type) }}
                     </span>
                     <span v-if="customerForm.updatedAt" class="update-badge">
                       <i class="fas fa-sync-alt me-1"></i>C·∫≠p nh·∫≠t: {{ customerForm.updatedAt }}
                     </span>
                   </div>
                 </div>
               </div>

               <div class="detail-main">
                 <div class="detail-left-col">
                   <div class="detail-section">
                     <h6 class="section-title-detail">
                       <i class="fas fa-user-circle me-2 icon-red"></i>
                       Th√¥ng tin kh√°ch h√†ng
@@ -1038,52 +1051,51 @@
                           <option value="MOI_GIOI">M√¥i gi·ªõi</option>
                           <option value="CHINH_CHU">Ch·ªß nh√†</option>
                           <option value="NGUOI_THAN">Ng∆∞·ªùi th√¢n</option>
                         </select>
                       </div>

                       <div class="info-item">
                         <label class="info-label">Tr·∫°ng th√°i <span class="text-danger">*</span></label>
                         <select
                             class="form-select form-select-custom"
                             v-model="customerForm.status"
                             required
                         >
                           <option value="NEW">M·ªõi</option>

                           <option value="DC_TELESALES">Ch∆∞a g·ªçi</option>
                           <option value="CHAM_SOC">ChƒÉm s√≥c</option>

                           <option value="TN_7NGAY">Ti·ªÅm nƒÉng 7 ng√†y</option>
                           <option value="TN_14NGAY">Ti·ªÅm nƒÉng 14 ng√†y</option>

                           <option value="THANH_CONG">Th√†nh c√¥ng (L√™n VP)</option>

                           <!-- ===== B·ªî SUNG ===== -->
                           <option value="KHACH_HUY_HEN">Kh√°ch hu·ª∑ h·∫πn</option>
-                          <option value="BAN_NHANH">B√°n nhanh</option>
-                          <option value="BAN_GP">B√°n gi·∫£i ph√°p</option>
+                          <option value="TRIEN_KHAI">Tri·ªÉn khai</option>

                           <option value="SAI_SO_LIEU">Sai s·ªë</option>
                           <option value="KHONG_LIEN_LAC_DUOC">Kh√¥ng li√™n l·∫°c ƒë∆∞·ª£c</option>
                           <option value="THAT_BAI">Th·∫•t b·∫°i</option>
                         </select>

                       </div>
                     </div>
                   </div>

                   <div class="detail-section">
                     <h6 class="section-title-detail">
                       <i class="fas fa-users me-2 icon-green"></i>
                       Nh√¢n s·ª± ph·ª• tr√°ch
                     </h6>
                     <div class="staff-grid">
                       <div class="staff-item">
                         <div class="staff-avatar">
                           <div v-if="customerForm.creatorAvatar" class="avatar-img">
                             <img :src="customerForm.creatorAvatar" :alt="customerForm.creatorName">
                           </div>
                           <div v-else class="avatar-placeholder small">
                             <i class="fas fa-user"></i>
                           </div>
                         </div>
@@ -1194,95 +1206,104 @@
     <!-- Customer Detail Modal -->
       <div v-if="showDetailModal" class="modal fade modal-custom show detail-modal" tabindex="-1">
         <div class="modal-dialog modal-xl modal-dialog-centered ">
           <div class="modal-content ">
             <div class="modal-header">
               <h5 class="modal-title">
                 <i class="fas fa-address-card me-2"></i>
                 Chi ti·∫øt kh√°ch h√†ng
               </h5>
               <button type="button" class="btn-close btn-close-white" @click="closeDetailModal"></button>
             </div>
             <div class="modal-body" v-if="detailCustomer">
               <!-- Hero section - Avatar v√† th√¥ng tin c∆° b·∫£n -->
               <div class="detail-hero">
                 <div class="detail-avatar">
                   <div  class="avatar-img">
                     <img
                         :src=" generateAvatarFromName( detailCustomer.hoTen )"
                         :alt="detailCustomer.hoTen"
                     >
                   </div>
                 </div>
                 <div class="detail-hero-info">
                   <div class="detail-hero-title">
                     <h4 class="mb-0">{{ detailCustomer.hoTen }}</h4>
-                    <span :class="`status-badge status-${detailCustomer.trangThai}`" style="font-size: 14px !important;">
+                    <span :class="['status-badge', getStatusClass(detailCustomer.trangThai)]" style="font-size: 14px !important;">
                   {{ getStatusLabel(detailCustomer.trangThai) }}
                 </span>
                   </div>
                   <div class="detail-hero-meta">
                     <span><i class="fas fa-phone-alt"></i> {{ formatPhoneNumber(detailCustomer.soDienThoai) }}</span>
                     <span><i class="fas fa-map-marker-alt"></i> {{ detailCustomer.tinhThanhPho }}</span>
                     <span><i class="fas fa-calendar-alt"></i> Ng√†y t·∫°o: {{ detailCustomer.ngayTao }}</span>
                   </div>
                   <div class="detail-hero-tags">
                 <span :class="`type-badge type-${detailCustomer.phanLoaiKhach}`" style="font-size: 14px !important;">
                   {{ getTypeLabel(detailCustomer.phanLoaiKhach) }}
                 </span>
                     <span class="update-badge" style="font-size: 16px !important;">
                   <i class="fas fa-sync-alt me-1"></i>C·∫≠p nh·∫≠t: {{ detailCustomer.ngayCapNhat }}
                 </span>
                   </div>
                 </div>
               </div>

               <!-- Main content - 2 c·ªôt -->
               <div class="detail-main">
                 <!-- C·ªôt tr√°i: Th√¥ng tin chi ti·∫øt -->
                 <div class="detail-left-col">
                   <div class="detail-section">
                     <h6 class="section-title-detail">
                       <i class="fas fa-user-circle me-2 icon-red"></i>
                       Th√¥ng tin kh√°ch h√†ng
                     </h6>
                     <div class="info-grid">
                       <div class="info-item">
                         <div class="info-label">H·ªç v√† t√™n</div>
                         <div class="info-value">{{ detailCustomer.hoTen }}</div>
                       </div>
                       <div class="info-item">
                         <div class="info-label">S·ªë ƒëi·ªán tho·∫°i</div>
                         <div class="info-value">{{ formatPhoneNumber(detailCustomer.soDienThoai) }}</div>
                       </div>
                       <div class="info-item">
                         <div class="info-label">Gi√° BƒêS</div>
                         <div class="info-value">{{ formatCurrency(detailCustomer.giaBDS) }}</div>
                       </div>
                       <div class="info-item">
-                        <div class="info-label">Ph√≠</div>
-                        <div class="info-value">{{ formatCurrency(detailCustomer.phi) }}</div>
+                        <div class="info-label">Lo·∫°i d·ªãch v·ª• tri·ªÉn khai</div>
+                        <div class="info-value">
+                          <span
+                            v-if="detailCustomer.tenDichVu"
+                            class="service-badge"
+                            :style="{ background: detailCustomer.mauDichVu ? `linear-gradient(135deg, ${detailCustomer.mauDichVu}, #ffffff)` : 'linear-gradient(135deg, #22c55e, #2dd4bf)' }"
+                          >
+                            {{ detailCustomer.tenDichVu }}
+                          </span>
+                          <span v-else>-</span>
+                        </div>
                       </div>
                       <div class="info-item">
                         <div class="info-label">ƒê·ªãa ch·ªâ</div>
                         <div class="info-value">{{ detailCustomer.tinhThanhPho }}</div>
                       </div>
                       <div class="info-item">
                         <div class="info-label">Ph√¢n lo·∫°i</div>
                         <div class="info-value">
                       <span :class="`type-label type-${detailCustomer.phanLoaiKhach}`" style=" font-size: 1rem !important;">
                         {{ getTypeLabel(detailCustomer.phanLoaiKhach) }}
                       </span>
                         </div>
                       </div>
                     </div>
                   </div>

                   <div class="detail-section">
                     <h6 class="section-title-detail">
                       <i class="fas fa-users me-2 icon-green"></i>
                       Nh√¢n s·ª± ph·ª• tr√°ch
                     </h6>
                     <div class="staff-grid">
                       <div class="staff-item">
                         <div class="staff-avatar">
                           <div v-if="detailCustomer.nhanVienTaoAvatar" class="avatar-img">
@@ -1339,51 +1360,51 @@
                     </div>

                   </div>
                 </div>

                 <!-- C·ªôt ph·∫£i: L·ªãch s·ª≠ ho·∫°t ƒë·ªông -->
                 <div class="detail-right-col">
                   <div class="history-section">
                     <h6 class="section-title-detail">
                       <i class="fas fa-history me-2 icon-yellow"></i>
                       L·ªãch s·ª≠ tr·∫°ng th√°i
                     </h6>
                     <div class="history-list" v-if="detailHistory.length">
                       <div
                           v-for="(item, index) in detailHistory"
                           :key="`history-${index}`"
                           class="history-item"
                       >
                         <div class="history-timeline">
                           <div class="timeline-dot"></div>
                           <div v-if="index < detailHistory.length - 1" class="timeline-line"></div>
                         </div>
                         <div class="history-content">
                           <div class="history-header">
                             <div class="history-status">
-                          <span :class="`status-badge status-${item.trangThai}`">
+                          <span :class="['status-badge', getStatusClass(item.trangThai)]">
                             {{ getStatusLabel(item.trangThai) }}
                           </span>
                             </div>
                             <div class="history-time">
                               <i class="fas fa-clock me-1"></i>
                               {{ formatDateTime(item.thoiGianCapNhat) }}
                             </div>
                           </div>
                           <div class="history-staff">
                             <i class="fas fa-user me-2"></i>
                             {{ item.tenNhanVien }}
                           </div>
                           <div class="history-note">
                             {{ item.ghiChu }}
                           </div>
                         </div>
                       </div>
                     </div>
                     <div v-else class="no-history">
                       <i class="fas fa-history"></i>
                       <p>Ch∆∞a c√≥ l·ªãch s·ª≠ ho·∫°t ƒë·ªông</p>
                     </div>
                   </div>
                 </div>
               </div>
@@ -1587,98 +1608,107 @@ const creatorOptions = ref([
 const mobileMenuOpen = ref(false)
 const notificationsOpen = ref(false)
 const userMenuOpen = ref(false)
 const activeTab = ref('all')
 const searchText = ref('')

 // Modal states
 const showAddCustomerModal = ref(false)
 const showAssignDataModal = ref(false)
 const showCallModal = ref(false)
 const showConfirmDeleteModal = ref(false)
 const showEditCustomerModal = ref(false)
 const showDetailModal = ref(false)
 const isAnyModalOpen = computed(() =>
   showAddCustomerModal.value ||
   showEditCustomerModal.value ||
   showDetailModal.value ||
   showAssignDataModal.value ||
   showConfirmDeleteModal.value
 )

 // Data state
 const filters = reactive({
   type: 'all',
   status: 'all',
+  resource: 'all',
   province: '',
   creator: 'all',
   createdFrom: '',
   createdTo: '',
   updatedFrom: '',
   updatedTo: ''
 })

 const customerForm = reactive({
   id: null,
   name: '',
   phone: '',
   province: '',
   oldProvince: '',
   type: '',
   status: 'NEW',
   avatar: '',
   notes: '',
   createdAt: '',
   updatedAt: '',
   creatorName: '',
   creatorAvatar: '',
   giaBDS: '',
   assigneeId: null,
   assigneeName: '',
   assigneeAvatar: ''
 })

 const addCustomerForm = reactive({
   name: '',
   phone: '',
   area: '',
   oldArea: '',
   type: 'CHINH_CHU',
   price: '',
   note: ''
 })

 const addPriceDisplay = ref('')
 const editPriceDisplay = ref('')
 const addPickedFileNames = ref([])

 const customerTypes = [
   { id: 'CHINH_CHU', label: 'Ch·ªß nh√†', icon: 'fas fa-house-user' },
   { id: 'MOI_GIOI', label: 'M√¥i gi·ªõi', icon: 'fas fa-handshake' },
   { id: 'NGUOI_THAN', label: 'Ng∆∞·ªùi th√¢n', icon: 'fas fa-people-group' }
 ]

+const customerSources = [
+  { id: 'ADS', label: 'Qu·∫£ng c√°o', icon: 'fas fa-bullhorn' },
+  { id: 'FORUM', label: 'Di·ªÖn ƒë√†n', icon: 'fas fa-comments' },
+  { id: 'RAO_VAT', label: 'Rao v·∫∑t', icon: 'fas fa-tags' },
+  { id: 'FB', label: 'Facebook', icon: 'fab fa-facebook' },
+  { id: 'SEO', label: 'SEO', icon: 'fas fa-magnifying-glass-chart' }
+]
+
 const callingCustomer = ref(null)
 const deletingCustomer = ref(null)
 const callSeconds = ref(0)
 const callNotes = ref('')
 const isEditing = ref(false)
 const selectedCustomer = ref(null)
 const fileForm = reactive({
   files: [],
   newFiles: [],
   newLandBookFiles: [],
   deletedFileIds: [],
   deletedLandBookFileIds: []
 })
 const originalFiles = ref([])

 const notification = reactive({
   show: false,
   message: '',
   type: 'info',
   icon: 'info-circle'
 })

 // Refs
 const monthlyChart = ref(null)
 const statusChart = ref(null)
@@ -1780,50 +1810,51 @@ const toggleMobileMenu = () => {
 }

 const toggleNotifications = () => {
   notificationsOpen.value = !notificationsOpen.value
   userMenuOpen.value = false
 }

 const toggleUserMenu = () => {
   userMenuOpen.value = !userMenuOpen.value
   notificationsOpen.value = false
 }

 const setActiveTab = (tab) => {
   activeTab.value = tab
   applyFilters()
 }

 const applyFilters = () => {
   // Filters are automatically applied through computed property
 }

 const resetFilters = () => {
   activeTab.value = 'all'
   filters.type = 'all'
   filters.status = 'all'
+  filters.resource = 'all'
   filters.province = ''
   filters.creator = 'all'
   filters.createdFrom = ''
   filters.createdTo = ''
   filters.updatedFrom = ''
   filters.updatedTo = ''
   searchText.value = ''
   showNotification('ƒê√£ ƒë·∫∑t l·∫°i t·∫•t c·∫£ b·ªô l·ªçc', 'info')
 }


 const excelInput = ref(null)

 /**
  * 1Ô∏è‚É£ Click n√∫t ‚Üí m·ªü ch·ªçn file
  */
 const openExcelPicker = () => {
   excelInput.value?.click()
 }

 /**
  * 2Ô∏è‚É£ Ch·ªçn file xong ‚Üí T·ª∞ G·ªåI API
  */
 const handleExcelSelected = async (event) => {
   const file = event.target.files?.[0]
@@ -2467,81 +2498,88 @@ const confirmAssignData = async () => {
     showNotification('C·∫•p d·ªØ li·ªáu th·∫•t b·∫°i, vui l√≤ng th·ª≠ l·∫°i!', 'warning')
   }
 }

 const exportExcel = () => {
   showNotification('Xu·∫•t d·ªØ li·ªáu ra Excel th√†nh c√¥ng!', 'success')
 }

 const exportPDF = () => {
   showNotification('Xu·∫•t d·ªØ li·ªáu ra PDF th√†nh c√¥ng!', 'success')
 }

 const showNotification = (message, type = 'info') => {
   notification.message = message
   notification.type = type
   notification.icon = type === 'success' ? 'check-circle' :
       type === 'warning' ? 'exclamation-triangle' : 'info-circle'
   notification.show = true

   setTimeout(() => {
     notification.show = false
   }, 5000)
 }

 // Helper functions
+const normalizeStatus = (status) => {
+  if (status === 'BAN_NHANH' || status === 'BAN_GP') return 'TRIEN_KHAI'
+  return status
+}
+
+const getStatusClass = (status) => `status-${normalizeStatus(status)}`
+
 const toDate = (value) => {
   if (!value) return new Date(0)
   const [year, month, day] = value.split('-').map(Number)
   return new Date(year, month - 1, day)
 }



 const getStatusLabel = (status) => {
   const statusMap = {
     NEW: 'M·ªõi',

     DC_TELESALES: 'Ch∆∞a g·ªçi',
     CHAM_SOC: 'ChƒÉm s√≥c',
     TN_7NGAY: 'TN 7 ng√†y',
     TN_14NGAY: 'TN 14 ng√†y',

     THANH_CONG: 'Th√†nh c√¥ng',

     // ===== B·ªî SUNG =====
     KHACH_HUY_HEN: 'Hu·ª∑ h·∫πn',
-    BAN_NHANH: 'B√°n nhanh',
-    BAN_GP: 'B√°n GP',
+    TRIEN_KHAI: 'Tri·ªÉn khai',

     THAT_BAI: 'Th·∫•t b·∫°i',
     KHONG_LIEN_LAC_DUOC: 'KLLD',
     SAI_SO: 'Sai s·ªë',
     SAI_SO_LIEU: 'Sai s·ªë',
   }

-  return statusMap[status] || status
+  const normalizedStatus = normalizeStatus(status)
+  return statusMap[normalizedStatus] || normalizedStatus
 }

 const getTypeLabel = (type) => {
   const typeMap = { 'MOI_GIOI': 'M√¥i gi·ªõi', 'CHINH_CHU': 'Ch·ªß nh√†', 'NGUOI_THAN': 'Ng∆∞·ªùi th√¢n' }
   return typeMap[type] || type
 }

 const getProvinceLabel = (province) => {
   if (!province) return '-'
   if (province === 'Kh√°c' || province === 'other') return 'Kh√°c'
   const provinceMatch = addressData.find(item => item.name === province)
   if (provinceMatch) return provinceMatch.name
   const legacyMap = {
     'hanoi': 'Th√†nh ph·ªë H√† N·ªôi',
     'hcm': 'Th√†nh ph·ªë H·ªì Ch√≠ Minh',
     'danang': 'Th√†nh ph·ªë ƒê√† N·∫µng',
     'haiphong': 'Th√†nh ph·ªë H·∫£i Ph√≤ng',
     'cantho': 'Th√†nh ph·ªë C·∫ßn Th∆°'
   }
   return legacyMap[province] || province
 }

 const formatPhoneNumber = (phone) => {
   if (!phone) return '-'
   return phone.replace(/(\d{4})(\d{3})(\d{3})/, '$1 $2 $3')
@@ -2616,98 +2654,102 @@ const getAssigneeInfo = (assigneeId) => {

 const getProvinceShortLabel = (province) => {
   const label = getProvinceLabel(province)

   if (!label || label === '-' || label === 'Kh√°c') return label

   return label
       .replace(/^Th√†nh ph·ªë\s+/i, 'TP. ')
       .replace(/^T·ªânh\s+/i, 'T. ')
 }
 const STATUS_META = {
   NEW: { label: 'M·ªõi', color: '#94a3b8' },
   DC_TELESALES: { label: 'M·ªõi ti·∫øp nh·∫≠n', color: '#6366f1' },
   CHAM_SOC: { label: 'ƒêang chƒÉm s√≥c', color: '#38bdf8' },
   TN_7NGAY: { label: 'Ti·ªÅm nƒÉng 7 ng√†y', color: '#0ea5e9' },
   TN_14NGAY: { label: 'Ti·ªÅm nƒÉng 14 ng√†y', color: '#0284c7' },

   THAT_BAI: { label: 'Th·∫•t b·∫°i', color: '#f43f5e' },
   KHONG_LIEN_LAC_DUOC: { label: 'Kh√¥ng li√™n l·∫°c ƒë∆∞·ª£c', color: '#f97316' },
   SAI_SO_LIEU: { label: 'Sai s·ªë li·ªáu', color: '#a855f7' },

   THANH_CONG: { label: 'Th√†nh c√¥ng (L√™n VP)', color: '#22c55e' },

   // ===== B·ªî SUNG =====
   KHACH_HUY_HEN: { label: 'Kh√°ch hu·ª∑ h·∫πn', color: '#b45309' }, // hu·ª∑ ‚Äì cam n√¢u
-  BAN_NHANH: { label: 'B√°n nhanh', color: '#15803d' },        // b√°n nhanh ‚Äì xanh ƒë·∫≠m
-  BAN_GP: { label: 'B√°n GP', color: '#0f766e' }               // ƒë√£ l√™n VP ‚Äì xanh ng·ªçc
+  TRIEN_KHAI: { label: 'Tri·ªÉn khai', color: '#10b981' }        // tri·ªÉn khai ‚Äì xanh gradient
 }

 const PHAN_LOAI_META = {
   MOI_GIOI: {
     label: 'M√¥i gi·ªõi',
     color: '#43e97b' // xanh l√° (match type-MOI_GIOI)
   },
   CHINH_CHU: {
     label: 'Ch·ªß nh√†',
     color: '#667eea' // xanh d∆∞∆°ng (match type-CHINH_CHU)
   },
   NGUOI_THAN: {
     label: 'Ng∆∞·ªùi th√¢n',
     color: '#fa709a' // h·ªìng (match type-NGUOI_THAN)
   }
 }
 const monthlyStats = ref([])
 let monthlyChartInstance = null

 const fetchMonthlyStats = async () => {
   try {
     const res = await api.get('/customer-crm/admin/monthly-category', {
       params: {
         year: chartYear.value,
         chartType: chartType.value // üëà L·∫§Y T·ª™ UI
       }
     })
     monthlyStats.value = res.data || []
   } catch (e) {
     console.error('‚ùå L·ªói fetch monthly stats', e)
     monthlyStats.value = []
   }
 }

 const buildMonthlyLineDatasets = () => {
   const meta =
       chartType.value === 'STATUS'
           ? STATUS_META
           : PHAN_LOAI_META

   const datasets = []

+  const normalizedMonthlyStats = monthlyStats.value.map(item => ({
+    ...item,
+    key: normalizeStatus(item.key)
+  }))
+
   Object.entries(meta).forEach(([key, metaItem]) => {
     const dataByMonth = Array(12).fill(0)

-    monthlyStats.value
+    normalizedMonthlyStats
         .filter(i => i.key === key)
         .forEach(i => {
           dataByMonth[i.month - 1] = i.count
         })

     // ‚ùå kh√¥ng c√≥ d·ªØ li·ªáu th√¨ b·ªè
     if (dataByMonth.every(v => v === 0)) return

     datasets.push({
       label: metaItem.label,
       data: dataByMonth,
       borderColor: metaItem.color,
       backgroundColor: metaItem.color + '22',
       tension: 0.3,
       fill: true,
       borderWidth: 3
     })
   })

   return datasets
 }

 // Initialize charts
 const initMonthlyChart = () => {
   const ctx = monthlyChart.value?.getContext('2d')
@@ -2795,54 +2837,59 @@ const initStatusChart = () => {
               const total = context.dataset.data.reduce((a, b) => a + b, 0)
               const percent = total ? ((value / total) * 100).toFixed(1) : 0
               return `${label}: ${value} (${percent}%)`
             }
           }
         }
       }
     }
   })
 }

 const statusStats = ref([])
 const fetchStatusStats = async () => {
   try {
     const res = await api.get('/customer-crm/admin/status-summary')
     statusStats.value = res.data || []
   } catch (e) {
     console.error('‚ùå L·ªói l·∫•y th·ªëng k√™ tr·∫°ng th√°i', e)
     statusStats.value = []
   }
 }
 const buildStatusChartData = () => {
   const labels = []
   const data = []
   const backgroundColor = []
+  const statusTotals = statusStats.value.reduce((acc, item) => {
+    const key = normalizeStatus(item.status)
+    if (!key) return acc
+    acc[key] = (acc[key] || 0) + Number(item.count || 0)
+    return acc
+  }, {})

   Object.entries(STATUS_META).forEach(([statusKey, meta]) => {
-    const found = statusStats.value.find(s => s.status === statusKey)
-    const value = found ? found.count : 0
+    const value = statusTotals[statusKey] || 0

     // n·∫øu mu·ªën ·∫©n status = 0 th√¨ uncomment d√≤ng d∆∞·ªõi
     // if (value === 0) return

     labels.push(meta.label)
     data.push(value)
     backgroundColor.push(meta.color)
   })

   return { labels, data, backgroundColor }
 }

 const fetchMarketing = async () => {
   try {
     const res = await api.get('/customer-crm/admin/marketing')
     marketingoptions.value = res.data
   } catch (e) {
     console.error(e)
   }
 }

 const fetchTeleSales = async () => {
   try {
     const res = await api.get('/customer-crm/admin/telesales')
     staffMembers.value = res.data.map((staff) => {
@@ -2945,68 +2992,70 @@ watch(page, () => {
   fetchCustomers()
 fetchTeleSalesSummary()
 })

 import api from '/src/api/api.js'
 import {generateAvatarFromName, shortenName} from "../../assets/js/global.js";
 import {
   confirmYesNo,
   showCenterError,
   showCenterSuccess,
   showCenterWarning,
   showLoading,
   showWarning,
   updateAlertError,
   updateAlertSuccess
 } from "../../assets/js/alertService.js";
 import NotificationBell from "../NotificationBell.vue";
 const marketingoptions = ref([])


 const buildFilterPayload = () => ({
   search: searchText.value || null,

   phanLoaiKhach: filters.type !== 'all' ? filters.type : null,
   trangThai: filters.status !== 'all' ? filters.status : null,
+  resouce: filters.resource !== 'all' ? filters.resource : null,
   tinhThanhPho: filters.province || null,
   nguoiTaoId: filters.creator !== 'all' ? filters.creator : null,

   ngayTaoTu: filters.createdFrom || null,
   ngayTaoDen: filters.createdTo || null,
   ngayCapNhatTu: filters.updatedFrom || null,
   ngayCapNhatDen: filters.updatedTo || null,

   page: page.value,
   size: pageSize.value
 })


 const buildFilterPayloadDB = () => ({
   search: searchText.value || null,

   phanLoaiKhach: filters.type !== 'all' ? filters.type : null,
   trangThai: filters.status !== 'all' ? filters.status : null,
+  resouce: filters.resource !== 'all' ? filters.resource : null,
   tinhThanhPho: filters.province || null,
   nguoiTaoId: filters.creator !== 'all' ? filters.creator : null,

   ngayTaoTu: filters.createdFrom || null,
   ngayTaoDen: filters.createdTo || null,
   ngayCapNhatTu: filters.updatedFrom || null,
   ngayCapNhatDen: filters.updatedTo || null
 })

 const fetchCustomers = async () => {
   loading.value = true
   try {
     const res = await api.post(
         '/customer-crm/admin/filter',
         buildFilterPayload()
     )

     customers.value = res.data.content
     totalElements.value = res.data.page.totalElements
     totalPages.value = res.data.page.totalPages
   } catch (e) {
     console.error(e)
   } finally {
     loading.value = false
   }
@@ -3901,60 +3950,65 @@ h1,h2,h3,h4,h5,h6 { font-family: 'Poppins', sans-serif; font-weight: 600; }
 }

 /* ===== Kh√¥ng li√™n l·∫°c ƒë∆∞·ª£c ===== */
 .status-KHONG_LIEN_LAC_DUOC {
   background: linear-gradient(135deg, #FF5858 0%, #F09819 100%);
   color: white;
 }

 /* ===== Sai s·ªë li·ªáu ===== */
 .status-SAI_SO_LIEU {
   background: linear-gradient(135deg, #8E2DE2 0%, #4A00E0 100%);
   color: white;
 }

 /* ===== Th√†nh c√¥ng (l√™n VP) ===== */
 .status-THANH_CONG {
   background: linear-gradient(135deg, #3CD3AD 0%, #4CB8C4 100%);
   color: white;
 }
 /* ===== Kh√°ch hu·ª∑ h·∫πn ===== */
 .status-KHACH_HUY_HEN {
   background: linear-gradient(135deg, #b45309 0%, #f59e0b 100%);
   color: white;
 }

-/* ===== B√°n nhanh ===== */
-.status-BAN_NHANH {
-  background: linear-gradient(135deg, #0f9b0f 0%, #38ef7d 100%);
+/* ===== Tri·ªÉn khai ===== */
+.status-TRIEN_KHAI {
+  background: linear-gradient(135deg, #22c55e 0%, #2dd4bf 100%);
   color: white;
 }

-/* ===== B√°n GP (ƒë√£ l√™n VP) ===== */
-.status-BAN_GP {
-  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
-  color: white;
+.service-badge {
+  display: inline-flex;
+  align-items: center;
+  padding: 0.35rem 0.75rem;
+  border-radius: 999px;
+  color: #0f172a;
+  font-weight: 600;
+  font-size: 0.95rem;
+  box-shadow: 0 8px 20px rgba(34, 197, 94, 0.18);
 }


 /* Type Badges */
 .type-badge {
   padding: 5px 10px;
   border-radius: 8px;
   font-size: 11px;
   font-weight: 600;
   text-transform: uppercase;
   letter-spacing: 0.5px;
   display: inline-block;
 }
 .type-MOI_GIOI { background: linear-gradient(135deg, rgba(67, 233, 123, 0.15) 0%, rgba(56, 249, 215, 0.15) 100%); color: #049a44; border: 1px solid rgba(67, 233, 123, 0.3); }
 .type-CHINH_CHU { background: linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%); color: #062bd5; border: 1px solid rgba(102, 126, 234, 0.3); }
 .type-NGUOI_THAN { background: linear-gradient(135deg, rgba(250, 112, 154, 0.15) 0%, rgba(254, 225, 64, 0.15) 100%); color: #da0344; border: 1px solid rgba(250, 112, 154, 0.3); }

 /* Action Buttons */
 .action-buttons { display: flex; gap: 6px; }
 .action-btn {
   width: 34px; height: 34px;
   border-radius: 10px;
   display: flex; align-items: center; justify-content: center;
   border: none;
   transition: all var(--transition-fast);
diff --git a/src/components/thiet-kegiandien/marketing-cap-da-ta.vue b/src/components/thiet-kegiandien/marketing-cap-da-ta.vue
index f4ca7662f7bb9395f55a841c81712e727fe20c3c..5b274eb2738bfd925ab2ea6603812ddf61b061df 100644
--- a/src/components/thiet-kegiandien/marketing-cap-da-ta.vue
+++ b/src/components/thiet-kegiandien/marketing-cap-da-ta.vue
@@ -495,92 +495,100 @@ const formData = reactive({

 const submissionCount = ref(0);
 const totalValue = ref(2435000000);
 const priceDisplay = ref("");

 const customerTypes = [
   { id: "CHINH_CHU", label: "Ch·ªß nh√†", icon: "fas fa-house-user" },
   { id: "MOI_GIOI", label: "M√¥i gi·ªõi", icon: "fas fa-handshake" },
   { id: "NGUOI_THAN", label: "Ng∆∞·ªùi th√¢n", icon: "fas fa-people-group" },
 ];

 const customerSources = [
   { id: "ADS", label: "Qu·∫£ng c√°o", icon: "fas fa-bullhorn" },
   { id: "FORUM", label: "Di·ªÖn ƒë√†n", icon: "fas fa-comments" },
   { id: "RAO_VAT", label: "Rao v·∫∑t", icon: "fas fa-tags" },
   { id: "FB", label: "Facebook", icon: "fab fa-facebook" },
   { id: "SEO", label: "SEO", icon: "fas fa-magnifying-glass-chart" },
 ];

 /* =========================
    STATUS DOUGHNUT (Chart.js)
 ========================= */
 const distributionCanvas = ref(null);
 let distributionChart = null;

+const normalizeStatus = (status) => {
+  if (status == null) return status
+  return status === 'BAN_NHANH' || status === 'BAN_GP' ? 'TRIEN_KHAI' : status
+}
+
 const STATUS_META = {
   NEW: { label: "M·ªõi", color: "#94a3b8" },                 // x√°m
   DC_TELESALES: { label: "ƒê√£ c·∫•p Telesales", color: "#6366f1" }, // t√≠m xanh
   CHAM_SOC: { label: "ƒêang chƒÉm s√≥c", color: "#38bdf8" },  // xanh tr·ªùi
   TN_7NGAY: { label: "Theo d√µi 7 ng√†y", color: "#0ea5e9" },
   TN_14NGAY: { label: "Theo d√µi 14 ng√†y", color: "#0284c7" },

   THAT_BAI: { label: "Th·∫•t b·∫°i", color: "#dc2626" },       // ƒë·ªè ƒë·∫≠m
   KHONG_LIEN_LAC_DUOC: { label: "Kh√¥ng li√™n l·∫°c ƒë∆∞·ª£c", color: "#ea580c" }, // cam ƒë·∫≠m
   SAI_SO_LIEU: { label: "Sai s·ªë li·ªáu", color: "#9333ea" }, // t√≠m ƒë·∫≠m

   THANH_CONG: { label: "L√™n VP (ƒêK)", color: "#22c55e" },  // xanh l√° t∆∞∆°i

   // ===== B·ªî SUNG (ƒê·ªîI M√ÄU R√ï H∆†N) =====
   KHACH_HUY_HEN: { label: "Kh√°ch hu·ª∑ h·∫πn", color: "#b45309" }, // n√¢u cam (hu·ª∑)
-  BAN_NHANH: { label: "B√°n nhanh", color: "#15803d" },        // xanh l√° ƒë·∫≠m
-  BAN_GP: { label: "B√°n GP (ƒê√£ l√™n VP)", color: "#0f766e" },  // xanh ng·ªçc ƒë·∫≠m (premium)
+  TRIEN_KHAI: { label: "Tri·ªÉn khai", color: "#10b981" },  // xanh gradient hi·ªán ƒë·∫°i
 };



 const statusChartData = ref([]); // [{label,value,color}]
 const sourceCanvas = ref(null);
 let sourceChart = null;

 const SOURCE_META = {
   ADS: { label: "Qu·∫£ng c√°o", color: "#f97316" },
   FORUM: { label: "Di·ªÖn ƒë√†n", color: "#6366f1" },
   RAO_VAT: { label: "Rao v·∫∑t", color: "#22c55e" },
   FB: { label: "Facebook", color: "#1877f2" },
   SEO: { label: "SEO", color: "#e11d48" },
 };

 const sourceChartData = ref([]);

 async function fetchThongKeStatus() {
   try {
     const res = await api.get("/customer-crm/marketing/thong-ke-status", { withCredentials: true });
     const raw = Array.isArray(res.data) ? res.data : [];

     // BE: StatusChartDTO {label, value}
     statusChartData.value = raw
+        .map(item => ({
+          ...item,
+          label: normalizeStatus(item.label)
+        }))
         .filter(item => STATUS_META[item.label]) // label = enum key
         .map(item => ({
           label: STATUS_META[item.label].label, // d·ªãch label
           value: Number(item.value || 0),
           color: STATUS_META[item.label].color,
         }));

     nextTick(() => renderDistributionChart());
   } catch (err) {
     console.error(err);
     showCenterError("Kh√¥ng t·∫£i ƒë∆∞·ª£c th·ªëng k√™ tr·∫°ng th√°i");
   }
 }

 async function fetchThongKeNguon() {
   try {
     const res = await api.get("/customer-crm/marketing/thong-ke-nguon", { withCredentials: true });
     const raw = Array.isArray(res.data) ? res.data : [];
     const sourceTotals = raw.reduce((acc, item) => {
       const key = item?.nguon;
       if (key) acc[key] = Number(item?.total || 0);
       return acc;
     }, {});

     sourceChartData.value = Object.entries(SOURCE_META).map(([key, meta]) => ({
diff --git a/src/components/thiet-kegiandien/telesales-lien-he-khach-hang.vue b/src/components/thiet-kegiandien/telesales-lien-he-khach-hang.vue
index b123037263589e2d062ca6a34635d0a5b5e8160b..de36a1de9cff45037469cb6656d493d421211a66 100644
--- a/src/components/thiet-kegiandien/telesales-lien-he-khach-hang.vue
+++ b/src/components/thiet-kegiandien/telesales-lien-he-khach-hang.vue
@@ -157,50 +157,51 @@
                 {{ activeTab === 'new'
                   ? 'Kh√°ch h√†ng v·ª´a ti·∫øp nh·∫≠n'
                   : 'Kh√°ch h√†ng ƒë√£ li√™n h·ªá' }}
               </h3>

               <div class="view-controls">
                 <button class="tab-btn" :class="{ active: activeTab === 'new' }" @click="activeTab = 'new'">
                   <i class="fas fa-user-plus"></i> V·ª´a ti·∫øp nh·∫≠n ({{ newCustomers.length }})
                 </button>
                 <button
                     class="tab-btn"
                     :class="{ active: activeTab === 'contacted' }"
                     @click="activeTab = 'contacted'"
                 >
                   <i class="fas fa-user-check"></i> ƒê√£ li√™n h·ªá ({{ contactedCustomers.length }})
                 </button>
               </div>
             </div>

             <div class="section-controls">
               <div class="filter-group status-filter" v-if="activeTab === 'contacted'">
                 <label for="statusFilter">Tr·∫°ng th√°i:</label>
                 <select id="statusFilter" v-model="statusFilter">
                   <option :value="null">T·∫•t c·∫£</option>
                   <option value="THANH_CONG">Th√†nh c√¥ng</option>
+                  <option value="TRIEN_KHAI">Tri·ªÉn khai</option>
                   <option value="TN_7NGAY">Ti·ªÅm nƒÉng 7 ng√†y</option>
                   <option value="TN_14NGAY">Ti·ªÅm nƒÉng 14 ng√†y</option>
                   <option value="KHONG_LIEN_LAC_DUOC">Kh√¥ng li√™n l·∫°c</option>
                   <option value="SAI_SO_LIEU">Sai s·ªë</option>
                   <option value="CHAM_SOC">ChƒÉm s√≥c</option>
                   <option value="THAT_BAI">Th·∫•t b·∫°i</option>
                 </select>
               </div>

               <div class="filter-group type-filter">
                 <label for="typeFilter">Ph√¢n lo·∫°i:</label>
                 <select id="typeFilter" v-model="typeFilter">
                   <option :value="null">T·∫•t c·∫£</option>
                   <option value="CHINH_CHU">Ch·ªß nh√†</option>
                   <option value="MOI_GIOI">M√¥i gi·ªõi</option>
                   <option value="NGUOI_THAN">Ng∆∞·ªùi th√¢n</option>
                 </select>
               </div>

               <div class="search-box">
                 <input v-model="searchQuery" type="text" placeholder="T√¨m ki·∫øm theo t√™n, s·ªë ƒëi·ªán tho·∫°i..." />
                 <i class="fas fa-search"></i>
               </div>
             </div>
           </div>
@@ -468,55 +469,53 @@
             </div>

             <div class="detail-actions">
               <button class="action-btn move-btn" @click="moveToContacted">
                 <i class="fas fa-save"></i> L∆∞u th√¥ng tin
               </button>
             </div>
           </div>

           <div v-else class="detail-history">
             <div class="detail-section">
               <h5>
                 <i class="fas fa-history"></i>
                 L·ªãch s·ª≠ tr·∫°ng th√°i
               </h5>

               <div v-if="Array.isArray(selectedCustomer.lichSu) && selectedCustomer.lichSu.length" class="history-list">
                 <div
                     v-for="(item, idx) in selectedCustomer.lichSu"
                     :key="idx"
                     class="history-item"
                 >
                   <div class="history-header">
                     <div
                         class="history-status"
-                        :style="{
-                      backgroundColor: STATUS_META[item.trangThai]?.color || '#94a3b8'
-                    }"
+                        :style="{ background: getStatusMeta(item.trangThai).gradient || getStatusMeta(item.trangThai).color }"
                     >
-                      {{ STATUS_META[item.trangThai]?.label || item.trangThai }}
+                      {{ getStatusMeta(item.trangThai).label }}
                     </div>

                     <div class="history-time">
                       <i class="fas fa-clock"></i>
                       {{ formatReceivedAt(item.thoiGianCapNhat) }}
                     </div>
                   </div>

                   <div class="history-note" v-if="item.ghiChu">
                     {{ item.ghiChu }}
                   </div>
                   <div class="history-note muted" v-else>
                     Kh√¥ng c√≥ m√¥ t·∫£
                   </div>
                 </div>
               </div>

               <div v-else class="empty-history">Ch∆∞a c√≥ l·ªãch s·ª≠.</div>
             </div>
           </div>
         </div>
       </div>
     </div>
   </div>
 </template>
@@ -529,52 +528,51 @@ import FileNew from './File.vue'
 import addressData from '/src/assets/js/address.json'

 import NotificationBell from "../NotificationBell.vue";
 import { useAuthStore } from "/src/stores/authStore.js";
 import { useSidebarStore } from "/src/stores/sidebarStore.js";
 const authStore = useAuthStore();
 const info = authStore.userInfo;
 const sidebar = useSidebarStore();
 // ====== META ======
 const STATUS_META = {
   NEW: { label: 'M·ªõi', color: '#94a3b8' },

   DC_TELESALES: { label: 'M·ªõi ti·∫øp nh·∫≠n', color: '#6366f1' },
   CHAM_SOC: { label: 'ƒêang chƒÉm s√≥c', color: '#38bdf8' },
   TN_7NGAY: { label: 'Ti·ªÅm nƒÉng 7 ng√†y', color: '#0ea5e9' },
   TN_14NGAY: { label: 'Ti·ªÅm nƒÉng 14 ng√†y', color: '#0284c7' },

   THAT_BAI: { label: 'Th·∫•t b·∫°i', color: '#f43f5e' },
   KHONG_LIEN_LAC_DUOC: { label: 'Kh√¥ng li√™n l·∫°c ƒë∆∞·ª£c', color: '#f97316' },
   SAI_SO_LIEU: { label: 'Sai s·ªë li·ªáu', color: '#a855f7' },

   THANH_CONG: { label: 'Th√†nh c√¥ng (L√™n VP)', color: '#22c55e' },

   // ===== B·ªî SUNG =====
   KHACH_HUY_HEN: { label: 'Kh√°ch hu·ª∑ h·∫πn', color: '#b45309' },   // cam n√¢u ‚Äì hu·ª∑
-  BAN_NHANH: { label: 'B√°n nhanh', color: '#15803d' },          // xanh l√° ƒë·∫≠m
-  BAN_GP: { label: 'B√°n GP (ƒê√£ l√™n VP)', color: '#0f766e' },    // xanh ng·ªçc ƒë·∫≠m
+  TRIEN_KHAI: { label: 'Tri·ªÉn khai', color: '#10b981', gradient: 'linear-gradient(135deg, #22c55e, #2dd4bf)' }
 }


 // ====== Reactive state ======
 const activeTab = ref('new')
 const activeDetailTab = ref('detail')
 const selectedCustomer = ref(null)
 const detailForm = ref({
   name: '',
   province: '',
   oldProvince: '',
   type: null,
   giaBDS: '',
   note: ''
 })
 const provinceSearch = ref('')
 const provinceDropdownOpen = ref(false)
 const newNote = ref('')
 const searchQuery = ref('')
 const originalFiles = ref([])
 const skipTabReload = ref(false)

 const fileForm = ref({
   files: [],
   newFiles: [],
@@ -587,69 +585,75 @@ const fileForm = ref({
 const statusFilter = ref(null)
 const typeFilter = ref(null)

 const currentPage = ref(1)
 const pageSize = ref(10)

 const selectedTimeRange = ref('month')
 const selectedYear = ref(new Date().getFullYear())
 const selectedMonth = ref(new Date().getMonth() + 1)

 const lineChart = ref(null)
 const lineChartInstance = ref(null)
 const summaryChartInstance = ref(null)

 // ‚úÖ years = 5 nƒÉm g·∫ßn nh·∫•t
 const currentYear = new Date().getFullYear()
 const years = Array.from({ length: 5 }, (_, i) => currentYear - i)

 const months = [
   'Th√°ng 1','Th√°ng 2','Th√°ng 3','Th√°ng 4','Th√°ng 5','Th√°ng 6',
   'Th√°ng 7','Th√°ng 8','Th√°ng 9','Th√°ng 10','Th√°ng 11','Th√°ng 12'
 ]

 const isTagActive = (value) => selectedCustomer.value?.status === value

+const normalizeStatus = (status) => {
+  if (status === 'BAN_NHANH' || status === 'BAN_GP') return 'TRIEN_KHAI'
+  return status
+}
+
 // ====== Sidebar stats ======
 const todayStats = ref({
   soCuocGoiMoiHN: 0,
   soCuocGoiThanhCongHomNay: 0,
   soKhachLenVP: 0,
   khongLienLacDuoc: 0,
   saiSo: 0,
   soCuocGoiChamSocHN: 0
 })

 // ====== Tags ======
 const availableTags = [
   { value: 'CHAM_SOC', label: 'ƒêang chƒÉm s√≥c', color: '#38bdf8' },
   { value: 'TN_7NGAY', label: 'Ti·ªÅm nƒÉng 7 ng√†y', color: '#0ea5e9' },
   { value: 'TN_14NGAY', label: 'Ti·ªÅm nƒÉng 14 ng√†y', color: '#0284c7' },
   { value: 'THAT_BAI', label: 'Th·∫•t b·∫°i', color: '#f43f5e' },
   { value: 'KHONG_LIEN_LAC_DUOC', label: 'Kh√¥ng li√™n l·∫°c ƒë∆∞·ª£c', color: '#f97316' },
   { value: 'SAI_SO_LIEU', label: 'Sai s·ªë li·ªáu', color: '#a855f7' },
-  { value: 'THANH_CONG', label: 'Th√†nh c√¥ng (L√™n VP)', color: '#22c55e' }
+  { value: 'THANH_CONG', label: 'Th√†nh c√¥ng (L√™n VP)', color: '#22c55e' },
+  { value: 'TRIEN_KHAI', label: 'Tri·ªÉn khai', color: '#10b981' }
 ]

 // ====== Data from API ======
 const newCustomers = ref([])
 const contactedCustomers = ref([])
 const contactedPagination = ref({
   size: 10,
   number: 0,
   totalElements: 0,
   totalPages: 1
 })

 const thongKeTrangThai = ref([])

 // ‚úÖ d·ªØ li·ªáu cho line chart t·ª´ BE
 // K·ª≥ v·ªçng BE tr·∫£: [{ status: 'TN_14NGAY', time: 9, total: 3 }, ...]
 // - time: n·∫øu theo nƒÉm => 1..12 (th√°ng)
 // - time: n·∫øu theo th√°ng => 1..31 (ng√†y)
 const thongKeThoiGian = ref([])

 // ====== Computed ======
 const filteredCustomers = computed(() => {
   return activeTab.value === 'new' ? newCustomers.value : contactedCustomers.value
 })

@@ -697,69 +701,76 @@ watch([statusFilter, typeFilter, searchQuery], () => {
 watch([selectedTimeRange, selectedYear, selectedMonth], async () => {
   await fetchThongKeBieuDo()
 })

 const changePage = (page) => {
   currentPage.value = Math.min(Math.max(page, 1), totalPages.value)
   if (activeTab.value === 'contacted') {
     loadKhachDaLienHe()
   }
 }

 // ====== Helpers ======
 const getCustomerTypeLabel = (type) => {
   const typeLabels = {
     MOI_GIOI: 'M√¥i gi·ªõi',
     CHINH_CHU: 'Ch·ªß nh√†',
     NGUOI_THAN: 'Ng∆∞·ªùi th√¢n'
   }
   return typeLabels[type] || type
 }

 const getTagLabel = (tag) => {
   return STATUS_META[tag]?.label || tag
 }

+const getStatusMeta = (status) => {
+  const normalizedStatus = normalizeStatus(status)
+  return STATUS_META[normalizedStatus] || { label: normalizedStatus, color: '#94a3b8' }
+}
+
 const getLatestHistory = (customer) => {
   if (!customer?.lichSu || !customer.lichSu.length) return null

   // ƒë·∫£m b·∫£o l·∫•y b·∫£n ghi m·ªõi nh·∫•t theo th·ªùi gian
   return [...customer.lichSu]
       .sort((a, b) => new Date(b.thoiGianCapNhat) - new Date(a.thoiGianCapNhat))[0]
 }

 const getLatestHistoryLabel = (customer) => {
   const latest = getLatestHistory(customer)
   if (!latest) return null
-  return STATUS_META[latest.trangThai]?.label || latest.trangThai
+  const normalizedStatus = normalizeStatus(latest.trangThai)
+  return STATUS_META[normalizedStatus]?.label || normalizedStatus
 }

 const getLatestHistoryStyle = (customer) => {
   const latest = getLatestHistory(customer)
   if (!latest) return {}
+  const normalizedStatus = normalizeStatus(latest.trangThai)
   return {
-    backgroundColor: STATUS_META[latest.trangThai]?.color || '#94a3b8'
+    background: STATUS_META[normalizedStatus]?.gradient || STATUS_META[normalizedStatus]?.color || '#94a3b8'
   }
 }

 const getInitials = (name) => {
   if (!name) return ''
   const words = name.trim().split(/\s+/)
   const first = words[0]?.charAt(0) || ''
   const last = words.length > 1 ? words[words.length - 1].charAt(0) : ''
   return `${first}${last}`.toUpperCase()
 }

 const getAvatarColor = (name) => {
   if (!name) return 'hsl(210, 60%, 55%)'
   let hash = 0
   for (let i = 0; i < name.length; i += 1) {
     hash = name.charCodeAt(i) + ((hash << 5) - hash)
   }
   const hue = Math.abs(hash) % 360
   return `hsl(${hue}, 60%, 55%)`
 }

 const formatTime = (isoString) => {
   if (!isoString) return 'Ch∆∞a g·ªçi'
   const date = new Date(isoString)
   return date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })
@@ -1127,51 +1138,51 @@ const fetchThongKeBieuDo = async () => {
     }

     thongKeThoiGian.value = Array.isArray(res.data) ? res.data : []
     await nextTick()
     initLineChart()
   } catch (e) {
     console.error('‚ùå L·ªói load bi·ªÉu ƒë·ªì', e)
     thongKeThoiGian.value = []
     await nextTick()
     initLineChart()
   }
 }

 const buildLineChartData = () => {
   const isYear = selectedTimeRange.value === 'year'

   const labels = isYear
       ? Array.from({ length: 12 }, (_, i) => `T ${i + 1}`)
       : Array.from({ length: 31 }, (_, i) => `${i + 1}`)

   // status -> [..data..]
   const statusMap = {}

   for (const item of thongKeThoiGian.value) {
     // expected: {status, time, total}
-    const status = item.status ?? item.label // fallback
+    const status = normalizeStatus(item.status ?? item.label) // fallback
     const t = Number(item.time ?? item.bucket ?? item.day ?? item.month) // fallback
     const total = Number(item.total ?? item.value ?? 0)

     if (!status || !t || t < 1 || t > labels.length) continue

     if (!statusMap[status]) statusMap[status] = Array(labels.length).fill(0)
     statusMap[status][t - 1] = total
   }

   const datasets = Object.keys(statusMap).map((status) => ({
     label: STATUS_META[status]?.label || status,
     data: statusMap[status],
     borderColor: STATUS_META[status]?.color || '#94a3b8',
     backgroundColor: 'transparent',
     tension: 0.35,
     pointRadius: 2
   }))

   return { labels, datasets }
 }

 const initLineChart = () => {
   const canvas = lineChart.value
   if (!canvas) return

@@ -1228,53 +1239,53 @@ const doughnutTotalPlugin = {

     // ===== TEXT T·ªîNG =====
     ctx.textAlign = 'center'
     ctx.textBaseline = 'middle'
     ctx.fillStyle = '#1f2937' // x√°m ƒë·∫≠m
     ctx.font = '700 22px Inter, Arial'
     ctx.fillText(total, centerX, centerY - 6)

     // ===== SUB LABEL =====
     ctx.fillStyle = '#6b7280'
     ctx.font = '500 12px Inter, Arial'
     ctx.fillText('T·ªïng kh√°ch', centerX, centerY + 16)

     ctx.restore()
   }
 }

 const initSummaryChart = () => {
   const ctx = document.getElementById('summaryChart')
   if (!ctx) return

   if (summaryChartInstance.value) {
     summaryChartInstance.value.destroy()
   }

-  const labels = thongKeTrangThai.value.map((item) => STATUS_META[item.label]?.label || item.label)
+  const labels = thongKeTrangThai.value.map((item) => getStatusMeta(item.label).label)
   const data = thongKeTrangThai.value.map((item) => item.value)
-  const backgroundColor = thongKeTrangThai.value.map((item) => STATUS_META[item.label]?.color || '#94a3b8')
+  const backgroundColor = thongKeTrangThai.value.map((item) => getStatusMeta(item.label).color)

   summaryChartInstance.value = new Chart(ctx, {
     type: 'doughnut',
     data: {
       labels,
       datasets: [{ data, backgroundColor, borderWidth: 1 }]
     },
     options: {
       responsive: true,
       maintainAspectRatio: false,
       cutout: '70%',
       plugins: {
         legend: {
           position: 'bottom',
           labels: { boxWidth: 12, font: { size: 12 } }
         }
       }
     },
     plugins: [doughnutTotalPlugin]
   })

 }

 // ====== Refresh all ======
 const refreshData = async () => {
