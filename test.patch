diff --git a/src/components/dich-vu/Dich-vu-setting.vue b/src/components/dich-vu/Dich-vu-setting.vue
index bc3c486ec6b3c266b8f2b4fbd62590eeb7a3efcc..d9512e6b95bdc74563fb97ca55c90cf528edc731 100644
--- a/src/components/dich-vu/Dich-vu-setting.vue
+++ b/src/components/dich-vu/Dich-vu-setting.vue
@@ -402,50 +402,61 @@
         </div>

         <div class="svc3-modal-b">
           <div class="svc3-form-grid">
             <div class="svc3-form-card">
               <div class="svc3-form-title"><i class="fa-solid fa-screwdriver-wrench"></i><span>Thông tin</span></div>

               <div class="svc3-field">
                 <label><i class="fa-solid fa-tag"></i> Tên dịch vụ *</label>
                 <input v-model.trim="serviceForm.name" type="text" placeholder="Nhập tên dịch vụ..." />
               </div>

               <div class="svc3-field">
                 <label><i class="fa-solid fa-palette"></i> Màu phân loại *</label>
                 <div class="svc3-colorpick">
                   <input v-model="serviceForm.color" class="svc3-colorinput" type="color" />
                   <div class="svc3-swatch big" :style="{background: serviceForm.color}"></div>
                   <span class="mono muted">{{ serviceForm.color }}</span>
                 </div>
               </div>

               <div class="svc3-field">
                 <label><i class="fa-solid fa-file-lines"></i> Mô tả</label>
                 <textarea v-model.trim="serviceForm.description" rows="4" placeholder="Mô tả chi tiết..."></textarea>
               </div>
+
+              <div class="svc3-field">
+                <label><i class="fa-solid fa-toggle-on"></i> Trạng thái</label>
+                <label class="svc3-switch">
+                  <input v-model="serviceForm.active" type="checkbox" />
+                  <span class="svc3-slider"></span>
+                  <span class="svc3-switch-text" :class="{ on: serviceForm.active }">
+                    {{ serviceForm.active ? 'Đang hoạt động' : 'Ngừng hoạt động' }}
+                  </span>
+                </label>
+              </div>
             </div>

             <div class="svc3-form-card">
               <div class="svc3-form-title flex items-center justify-between gap-2">
                 <div class="flex items-center gap-2">
                   <i class="fa-solid fa-tags"></i><span>Phân khúc</span>
                 </div>
                 <div class="flex gap-2">
                   <button class="svc3-btn ghost" @click="normalizeServiceSegments()">
                     <i class="fa-solid fa-broom"></i><span>Làm sạch</span>
                   </button>
                   <button class="svc3-btn primary" @click="addServiceSegment()">
                     <i class="fa-solid fa-plus"></i><span>Thêm</span>
                   </button>
                 </div>
               </div>

               <div class="svc3-note">
                 Quy tắc: <b>[min, max)</b> không được giao nhau và <b>min &lt; max</b>.
               </div>

               <!-- UPDATED: header columns, no per-row labels -->
               <div class="svc3-seg-edit-list compact">
                 <div class="svc3-seg-cols">
                   <div class="c">Min</div>
@@ -714,50 +725,51 @@ const computedSegments = computed(() => {
 const serviceDetailOpen = ref(false);
 const serviceEditOpen = ref(false);
 const segmentEditOpen = ref(false);

 /* Service detail */
 const detailServiceId = ref(null);
 const detailService = ref(null)
 const fetchServiceDetail = async (id) => {
   try {
     const res = await api.get(`/dich-vu-thg/admin/${id}`)
     detailService.value = res.data
     serviceDetailOpen.value = true
   } catch (e) {
     console.error('❌ Lỗi fetch service detail', e)
     toast('error', 'Không tải được chi tiết dịch vụ')
   }
 }


 /* Service form modal (create/edit) */
 const serviceForm = reactive({
   id: null,
   name: "",
   color: "#667eea",
   description: "",
+  active: true,
   segments: []
 });
 const segErrors = ref([]);

 /* Segment edit modal */
 const segmentForm = reactive({
   serviceId: null,
   segmentId: null,
   minText: "",
   maxText: "",
   priceText: ""
 });
 const segmentError = ref("");

 /* ===== TOAST ===== */
 const toasts = ref([]);
 function toast(type, message) {
   const id = `${Date.now()}-${Math.random()}`;
   toasts.value.push({ id, type, message });
   setTimeout(() => (toasts.value = toasts.value.filter(t => t.id !== id)), 2600);
 }

 /* ===== HELPERS ===== */
 function pad3(n) { return String(n).padStart(3, "0"); }

@@ -801,75 +813,95 @@ function onAssetMoneyFocus() {
 }
 function onAssetMoneyBlur() {
   const n = parseFormattedNumber(assetValueText.value);
   assetValueText.value = n ? formatNumberWithDots(n) : "";
 }

 /* ===== SERVICES ACTIONS ===== */
 function openServiceDetail(id) {
   detailServiceId.value = id
   fetchServiceDetail(id)
 }

 function closeServiceDetail() {
   serviceDetailOpen.value = false;
   detailService.value = null;
   segmentEditOpen.value = false;
 }



 function openCreateService() {
   serviceForm.id = null;
   serviceForm.name = "";
   serviceForm.color = "#667eea";
   serviceForm.description = "";
+  serviceForm.active = true;
   serviceForm.segments = [
     { _key: `${Date.now()}-${Math.random()}`, minText: formatNumberWithDots(1000000), maxText: formatNumberWithDots(5000000), priceText: formatNumberWithDots(8000000) }
   ];
   segErrors.value = new Array(serviceForm.segments.length).fill("");
   serviceEditOpen.value = true;
 }

-function openEditService(id) {
-  const s = services.value.find(x => x.id === id);
-  if (!s) return;
-  serviceForm.id = s.id;
-  serviceForm.name = s.name;
-  serviceForm.color = s.color;
-  serviceForm.description = s.description || "";
-  serviceForm.segments = (s.priceSegments || []).map(seg => ({
-    _key: `${Date.now()}-${Math.random()}`,
-    minText: formatNumberWithDots(seg.min),
-    maxText: formatNumberWithDots(seg.max),
-    priceText: formatNumberWithDots(seg.price)
-  }));
+async function openEditService(id) {
+  const fallback = services.value.find(x => x.id === id);
+  if (!fallback) return;
+  serviceEditOpen.value = true;
+  try {
+    const res = await api.get(`/dich-vu-thg/admin/${id}`);
+    const s = res.data || fallback;
+    serviceForm.id = s.id;
+    serviceForm.name = s.name;
+    serviceForm.color = s.color;
+    serviceForm.description = s.description || "";
+    serviceForm.active = s.active ?? true;
+    serviceForm.segments = (s.priceSegments || []).map(seg => ({
+      _key: `${Date.now()}-${Math.random()}`,
+      minText: formatNumberWithDots(seg.min),
+      maxText: formatNumberWithDots(seg.max),
+      priceText: formatNumberWithDots(seg.price)
+    }));
+  } catch (e) {
+    console.error("❌ Lỗi fetch service detail", e);
+    toast("error", "Không tải được chi tiết dịch vụ, dùng dữ liệu danh sách.");
+    serviceForm.id = fallback.id;
+    serviceForm.name = fallback.name;
+    serviceForm.color = fallback.color;
+    serviceForm.description = fallback.description || "";
+    serviceForm.active = fallback.active ?? true;
+    serviceForm.segments = (fallback.priceSegments || []).map(seg => ({
+      _key: `${Date.now()}-${Math.random()}`,
+      minText: formatNumberWithDots(seg.min),
+      maxText: formatNumberWithDots(seg.max),
+      priceText: formatNumberWithDots(seg.price)
+    }));
+  }
   if (!serviceForm.segments.length) {
     serviceForm.segments = [{ _key: `${Date.now()}-${Math.random()}`, minText: formatNumberWithDots(1000000), maxText: formatNumberWithDots(5000000), priceText: formatNumberWithDots(8000000) }];
   }
   segErrors.value = new Array(serviceForm.segments.length).fill("");
-  serviceEditOpen.value = true;
 }

 function closeServiceEdit() {
   serviceEditOpen.value = false;
 }

 function addServiceSegment() {
   serviceForm.segments.push({ _key: `${Date.now()}-${Math.random()}`, minText: formatNumberWithDots(1000000), maxText: formatNumberWithDots(5000000), priceText: formatNumberWithDots(8000000) });
   segErrors.value.push("");
 }

 function removeServiceSegment(idx) {
   if (serviceForm.segments.length <= 1) return toast("error", "Dịch vụ phải có ít nhất 1 phân khúc.");
   serviceForm.segments.splice(idx, 1);
   segErrors.value.splice(idx, 1);
 }

 function normalizeServiceSegments() {
   const parsed = serviceForm.segments
       .map(s => ({
         _key: s._key,
         min: parseFormattedNumber(s.minText),
         max: parseFormattedNumber(s.maxText),
         price: parseFormattedNumber(s.priceText)
       }))
@@ -933,60 +965,62 @@ function validateServiceForm() {
   if (segErrors.value.some(Boolean)) {
     toast("error", "Vui lòng sửa lỗi phân khúc trước khi lưu.");
     return false;
   }
   return true;
 }

 function saveServiceFromModal() {
   if (!validateServiceForm()) return;

   const normalizedSegments = serviceForm.segments.map((s, i) => ({
     id: i + 1,
     min: parseFormattedNumber(s.minText),
     max: parseFormattedNumber(s.maxText),
     price: parseFormattedNumber(s.priceText)
   }));

   if (serviceForm.id) {
     const idx = services.value.findIndex(x => x.id === serviceForm.id);
     if (idx === -1) return toast("error", "Không tìm thấy dịch vụ.");
     services.value[idx] = {
       ...services.value[idx],
       name: serviceForm.name.trim(),
       color: serviceForm.color || "#667eea",
       description: serviceForm.description.trim(),
+      active: serviceForm.active,
       priceSegments: normalizedSegments
     };
     toast("success", "Đã cập nhật dịch vụ.");
   } else {
     const newId = services.value.length ? Math.max(...services.value.map(s => s.id)) + 1 : 1;
     services.value.unshift({
       id: newId,
       name: serviceForm.name.trim(),
       color: serviceForm.color || "#667eea",
       description: serviceForm.description.trim(),
+      active: serviceForm.active,
       priceSegments: normalizedSegments
     });
     toast("success", "Đã thêm dịch vụ mới.");
   }

   serviceEditOpen.value = false;
 }

 function removeService(id) {
   if (!confirm("Bạn có chắc muốn xóa dịch vụ này?")) return;
   services.value = services.value.filter(s => s.id !== id);
   toast("success", "Đã xóa dịch vụ.");
   if (detailServiceId.value === id) closeServiceDetail();
   if (serviceForm.id === id) closeServiceEdit();
 }

 /* ===== SEGMENTS ACTIONS ===== */
 function removeSegment(serviceId, segmentId) {
   const sIdx = services.value.findIndex(s => s.id === serviceId);
   if (sIdx === -1) return;

   if (!confirm("Bạn có chắc muốn xóa phân khúc này?")) return;

   const segs = services.value[sIdx].priceSegments.filter(x => x.id !== segmentId);
   if (segs.length === 0) return toast("error", "Dịch vụ phải có ít nhất 1 phân khúc.");
@@ -1811,50 +1845,97 @@ watch(serviceQuery, async () => {
   width:28px; height:28px;
   border-radius: 12px;
   display:grid; place-items:center;
   background: rgba(15,23,42,.06);
 }

 .svc3-field{ display:grid; gap:6px; margin: 10px 12px; }
 .svc3-field label{
   font-size: 12px;
   font-weight: 650;
   color: rgba(11,18,32,.80);
   display:flex; align-items:center; gap:8px;
 }
 .svc3-field input,
 .svc3-field textarea{
   border: 1px solid rgba(15,23,42,.12);
   border-radius: 12px;
   background: #fff;
   padding: 9px 10px;
   font-size: 13px;
   font-weight: 550;
   outline:none;
   transition: var(--t);
   color: #000;
 }
+.svc3-switch{
+  display:inline-flex;
+  align-items:center;
+  gap:10px;
+  cursor:pointer;
+  user-select:none;
+}
+.svc3-switch input{
+  position:absolute;
+  opacity:0;
+  pointer-events:none;
+}
+.svc3-slider{
+  width:46px;
+  height:26px;
+  border-radius:999px;
+  background: rgba(15,23,42,.2);
+  position:relative;
+  transition: var(--t);
+  box-shadow: inset 0 2px 6px rgba(15,23,42,.2);
+}
+.svc3-slider::after{
+  content:"";
+  position:absolute;
+  top:3px;
+  left:3px;
+  width:20px;
+  height:20px;
+  border-radius:50%;
+  background:#fff;
+  box-shadow: 0 6px 12px rgba(0,0,0,.18);
+  transition: var(--t);
+}
+.svc3-switch input:checked + .svc3-slider{
+  background: linear-gradient(135deg,#22c55e 0%, #16a34a 100%);
+}
+.svc3-switch input:checked + .svc3-slider::after{
+  transform: translateX(20px);
+}
+.svc3-switch-text{
+  font-weight: 650;
+  color: rgba(15,23,42,.7);
+  transition: var(--t);
+}
+.svc3-switch-text.on{
+  color: #0f172a;
+}
 .svc3-field input:focus,
 .svc3-field textarea:focus{
   border-color: rgba(102,126,234,.45);
   box-shadow: 0 0 0 4px rgba(102,126,234,.12);
 }
 .svc3-colorpick{ display:flex; align-items:center; gap:10px; }
 .svc3-colorinput{
   width:44px; height:34px;
   border-radius: 12px;
   border: 2px solid #fff;
   padding:0;
   background: transparent;
   box-shadow: 0 10px 18px rgba(0,0,0,.10);
 }

 .svc3-note{
   margin: 10px 12px 0;
   padding: 10px;
   border-radius: 14px;
   border: 1px solid rgba(102,126,234,.16);
   background: rgba(102,126,234,.06);
   font-size: 12px;
   color: rgba(11,18,32,.78);
 }

