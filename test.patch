diff --git a/src/components/thiet-kegiandien/AppointmentsPage.vue b/src/components/thiet-kegiandien/AppointmentsPage.vue
index 3a1547b4774d7e68800252696a429467e74faa79..a1654d43cc79ce621249be78fbbd4479612ee2bd 100644
--- a/src/components/thiet-kegiandien/AppointmentsPage.vue
+++ b/src/components/thiet-kegiandien/AppointmentsPage.vue
@@ -2424,51 +2424,57 @@ onBeforeUnmount(() => {
                         </div>

                         <div class="appt-meta">
                           <span class="pill-soft">
                             <i class="fa-solid fa-building"></i>{{ appt.branch ? appt.branch : '-' }}
                           </span>
                           <span class="pill-soft">
                             <i class="fa-solid fa-user-tie"></i>{{ appt.staff }}
                           </span>

                           <!-- trạng thái giống table -->
                           <span
                               class="status-badge readonly"
                               :class="getStatusInfo(appt.status).cls"
                           >
                             {{ getStatusInfo(appt.status).label }}
                           </span>
                         </div>

                         <div v-if="appt.consultStatus" class="appt-sub">
                           KQ tư vấn: <b>{{ getConsultInfo(appt.consultStatus).label }}</b>
                         </div>
                       </div>

                       <div class="appt-cta">
-                        <button class="mini-btn" title="Sửa" @click.stop="openEditModal(appt.id)">
+                        <button
+                          class="mini-btn"
+                          :class="{ 'is-disabled': !canEditAppointment(appt) }"
+                          :disabled="!canEditAppointment(appt)"
+                          :title="!canEditAppointment(appt) ? 'Lịch hẹn đã có kết quả tư vấn' : 'Sửa'"
+                          @click.stop="handleAction('edit', appt, $event)"
+                        >
                           <i class="fa-regular fa-pen-to-square"></i>
                         </button>
                       </div>
                     </div>
                   </template>

                   <span v-else class="slot-empty">
                     <i class="fa-regular fa-hand-point-up me-2"></i>Kéo thả lịch vào đây
                   </span>
                 </div>
               </div>
             </div>
           </div>
         </section>
       </div>

       <!-- Table -->
       <section class="appointments-list">
         <div class="list-header">
           <h3><i class="fa-solid fa-list-check me-2"></i>Lịch hẹn theo bộ lọc</h3>
           <div class="pill-muted">
             <i class="fa-solid fa-filter"></i>
             <span>{{ activeFilterText }}</span>
             <span style="opacity: 0.55">•</span>
             <span>{{ activeFilterCount }}</span>
@@ -3184,51 +3190,58 @@ onBeforeUnmount(() => {
                         <span class="action-pill" :class="getActionInfo(item.action).cls">
                           {{ getActionInfo(item.action).label }}
                         </span>
                       </span>
                       <span>{{ item.stamp }}</span>
                     </div>
                     <div v-if="item.status || item.consultStatus" class="h-meta">
                       <span v-if="item.status" class="status-badge" :class="getStatusInfo(item.status).cls">
                         {{ getStatusInfo(item.status).label }}
                       </span>
                       <span v-if="item.consultStatus" class="consult-badge" :class="getConsultInfo(item.consultStatus).cls">
                         <i class="fa-solid" :class="getConsultInfo(item.consultStatus).icon"></i>
                         {{ getConsultInfo(item.consultStatus).label }}
                       </span>
                     </div>
                     <div class="h-desc">{{ item.desc || '' }}</div>
                   </div>
                 </div>
               </div>
             </div>
           </template>
         </div>

         <div class="modal-foot">
           <button class="btn btn-secondary" type="button" @click="closeDetailModal">Đóng</button>
-          <button class="btn btn-primary" type="button" @click="openEditModal(selectedAppointment.id)">
+          <button
+            class="btn btn-primary"
+            type="button"
+            :class="{ 'is-disabled': selectedAppointment && !canEditAppointment(selectedAppointment) }"
+            :disabled="selectedAppointment && !canEditAppointment(selectedAppointment)"
+            :title="selectedAppointment && !canEditAppointment(selectedAppointment) ? 'Lịch hẹn đã có kết quả tư vấn' : ''"
+            @click="openEditModal(selectedAppointment.id)"
+          >
             <i class="fa-regular fa-pen-to-square"></i>Chỉnh sửa
           </button>
         </div>
       </div>
     </div>

     <div v-if="confirmDialog.open" class="backdrop popup-backdrop" @click.self="closeConfirmDialog(false)">
       <div class="popup-modal" :class="`variant-${confirmDialog.variant}`" role="dialog" aria-modal="true">
         <div class="popup-head">
           <div class="popup-icon">
             <i class="fa-solid" :class="getConfirmIcon(confirmDialog.variant)"></i>
           </div>
           <button class="popup-close" type="button" @click="closeConfirmDialog(false)">
             <i class="fa-solid fa-xmark"></i>
           </button>
         </div>
         <div class="popup-body">
           <h4>{{ confirmDialog.title }}</h4>
           <p>{{ confirmDialog.message }}</p>
         </div>
         <div class="popup-foot">
           <button
             v-if="confirmDialog.showCancel"
             class="btn btn-secondary"
             type="button"
@@ -3503,50 +3516,62 @@ onBeforeUnmount(() => {
 }
 .status-tag.active{
   transform: translateY(-1px);
   border:1px solid rgba(20,22,30,0.08);
   box-shadow: 0 14px 28px rgba(0,0,0,0.10);
 }
 .st-all{ background: rgba(148,163,184,0.20); color:#334155; }
 .st-wait-tag{ background: rgba(251,191,36,0.18); color:#a16207; }
 .st-up-tag{ background: rgba(67,233,123,0.18); color:#0b7f6a; }
 .st-not-tag{ background: rgba(250,112,154,0.18); color:#a43e73; }
 .st-post-tag{ background: rgba(79,172,254,0.18); color:#0b6ea8; }
 .st-cancel-tag{ background: rgba(255,88,88,0.18); color:#b83b2c; }

 .btn{
   padding:11px 14px;
   border-radius:14px;
   font-size:13px;
   font-weight:850;
   cursor:pointer;
   display:inline-flex;
   align-items:center;
   gap:8px;
   transition:0.2s ease;
   border:none;
 }
+.btn:disabled,
+.btn.is-disabled{
+  cursor:not-allowed;
+  opacity:0.6;
+  filter: grayscale(0.1);
+  box-shadow:none;
+}
+.btn:disabled:hover,
+.btn.is-disabled:hover{
+  transform:none;
+  filter: grayscale(0.1);
+}
 .btn-sm{ padding:10px 12px; border-radius:12px; font-size:12.6px; }
 .btn-primary{
   background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
   color:#fff;
   box-shadow: 0 16px 40px rgba(102,126,234,0.20);
 }
 .btn-primary:hover{ transform: translateY(-1px); filter: brightness(0.99); }
 .btn-secondary{
   background: rgba(255,255,255,0.86);
   color:#3846c2;
   border:1px solid rgba(102,126,234,0.35);
   backdrop-filter: blur(10px);
 }
 .btn-secondary:hover{
   background: rgba(102,126,234,0.06);
   border-color: rgba(102,126,234,0.55);
   color:#2f3aa8;
 }

 /* ===== Calendar + Day row ===== */
 .calendar-day-row{
   display:grid;
   grid-template-columns: 1fr 1.55fr;
   gap:16px;
   align-items:stretch;
@@ -3787,50 +3812,64 @@ onBeforeUnmount(() => {
   background: rgba(148,163,184,0.16);
   border:1px solid rgba(20,22,30,0.06);
   font-weight:800;
   font-size:12px;
   color:#334155;
   white-space:nowrap;
 }
 .appt-sub{ font-weight:700; font-size:12px; color:#5b6576; margin-top:2px; }

 .appt-cta{ margin-left:auto; display:flex; gap:6px; }
 .mini-btn{
   width:36px; height:36px;
   border-radius:14px;
   border:1px solid rgba(20,22,30,0.10);
   background: rgba(255,255,255,0.92);
   cursor:pointer;
   transition:0.15s ease;
   display:flex; align-items:center; justify-content:center;
   color:#455064;
 }
 .mini-btn:hover{
   background: rgba(102,126,234,0.08);
   color:#3846c2;
   border-color: rgba(102,126,234,0.28);
 }
+.mini-btn.is-disabled,
+.mini-btn:disabled{
+  cursor:not-allowed;
+  opacity:0.55;
+  background: rgba(226,232,240,0.5);
+  border-color: rgba(148,163,184,0.35);
+  color:#64748b;
+}
+.mini-btn.is-disabled:hover,
+.mini-btn:disabled:hover{
+  background: rgba(226,232,240,0.5);
+  border-color: rgba(148,163,184,0.35);
+  color:#64748b;
+}

 /* Status badges (table + day schedule) */
 .status-badge{
   padding:7px 12px;
   border-radius:999px;
   font-size:12px;
   font-weight:900;
   display:inline-flex;
   align-items:center;
   gap:8px;
   cursor:pointer;
   user-select:none;
   border:1px solid rgba(20,22,30,0.06);
   transition:0.15s ease;
   white-space:nowrap;
 }
 .status-badge:hover{ transform: translateY(-1px); box-shadow: 0 14px 22px rgba(0,0,0,0.10); }

 .st-wait{ background: rgba(251,191,36,0.2); color:#a16207; }
 .st-up{ background: rgba(67,233,123,0.18); color:#0b7f6a; }
 .st-not{ background: rgba(250,112,154,0.18); color:#a43e73; }
 .st-post{ background: rgba(79,172,254,0.18); color:#0b6ea8; }
 .st-cancel{ background: rgba(255,88,88,0.18); color:#b83b2c; }

 /* ===== Table ===== */
