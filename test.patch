diff --git a/src/components/thiet-kegiandien/marketing-cap-da-ta.vue b/src/components/thiet-kegiandien/marketing-cap-da-ta.vue
index 44c39592984653dacc6e9093257867166524376b..740f5d97f35105e4e04df2bd28203e8884a8326c 100644
--- a/src/components/thiet-kegiandien/marketing-cap-da-ta.vue
+++ b/src/components/thiet-kegiandien/marketing-cap-da-ta.vue
@@ -171,50 +171,66 @@
                       class="form-control"
                       placeholder="0"
                       @input="handlePriceInput"
                       @blur="syncPriceDisplay"
                       required
                   />
                 </div>
               </div>

               <div class="form-group">
                 <label>Phân loại <span class="required">*</span></label>
                 <div class="type-buttons">
                   <button
                       v-for="type in customerTypes"
                       :key="type.id"
                       type="button"
                       :class="['type-btn', type.id, { active: formData.type === type.id }]"
                       @click="formData.type = type.id"
                   >
                     <i :class="type.icon"></i>
                     {{ type.label }}
                   </button>
                 </div>
               </div>

+              <div class="form-group">
+                <label>Nguồn <span class="required">*</span></label>
+                <div class="source-buttons">
+                  <button
+                      v-for="source in customerSources"
+                      :key="source.id"
+                      type="button"
+                      :class="['type-btn', source.id, { active: formData.source === source.id }]"
+                      @click="formData.source = source.id"
+                  >
+                    <i :class="source.icon"></i>
+                    {{ source.label }}
+                  </button>
+                </div>
+              </div>
+
               <div class="form-group">
                 <label>Ghi chú</label>
                 <div class="input-icon">
                   <span class="icon-chip" style="background: linear-gradient(135deg, #FF9966, #FF5E62); color: white;">
                     <i class="fas fa-note-sticky"></i>
                   </span>
                   <textarea
                       v-model="formData.note"
                       class="form-control"
                       rows="2"
                       placeholder="Thông tin bổ sung..."
                   ></textarea>
                 </div>
               </div>

               <!-- Upload tiny -->
               <div class="form-group">
                 <label>Đính kèm (tuỳ chọn)</label>
                 <div class="upload-row">
                   <label class="upload-btn" title="Tải tệp nhỏ">
                     <i class="fas fa-paperclip"></i>
                     <span>Up file</span>
                     <input id="fileInput" class="upload-input" type="file" multiple @change="onPickFile" />
                   </label>
                   <div class="upload-meta" v-if="pickedFileNames.length">
@@ -436,64 +452,73 @@ import {
   showLoading,
   updateAlertError,
   updateAlertSuccess,
   showCenterError,
   showCenterWarning,
   showWarning
 } from "../../assets/js/alertService.js";
 import NotificationBell from "../NotificationBell.vue";
 import { useAuthStore } from "/src/stores/authStore.js";
 import { useSidebarStore } from "/src/stores/sidebarStore.js";
 const authStore = useAuthStore();
 const info = authStore.userInfo;
 const sidebar = useSidebarStore();
 const provinces = ref(addressData);
 function normalizePhone(phone) {
   if (!phone) return "";
   return String(phone).trim().replace(/\s+/g, "");
 }

 const formData = reactive({
   name: "",
   phone: "",
   area: "",
   oldArea: null,
   type: "CHINH_CHU",
+  source: "ADS",
   price: "",
   note: "",
 });

 const submissionCount = ref(0);
 const totalValue = ref(2435000000);
 const priceDisplay = ref("");

 const customerTypes = [
   { id: "CHINH_CHU", label: "Chủ nhà", icon: "fas fa-house-user" },
   { id: "MOI_GIOI", label: "Môi giới", icon: "fas fa-handshake" },
   { id: "NGUOI_THAN", label: "Người thân", icon: "fas fa-people-group" },
 ];

+const customerSources = [
+  { id: "ADS", label: "Quảng cáo", icon: "fas fa-bullhorn" },
+  { id: "FORUM", label: "Diễn đàn", icon: "fas fa-comments" },
+  { id: "RAO_VAT", label: "Rao vặt", icon: "fas fa-tags" },
+  { id: "FB", label: "Facebook", icon: "fab fa-facebook" },
+  { id: "SEO", label: "SEO", icon: "fas fa-magnifying-glass-chart" },
+];
+
 /* =========================
    STATUS DOUGHNUT (Chart.js)
 ========================= */
 const distributionCanvas = ref(null);
 let distributionChart = null;

 const STATUS_META = {
   NEW: { label: "Mới", color: "#94a3b8" },                 // xám
   DC_TELESALES: { label: "Đã cấp Telesales", color: "#6366f1" }, // tím xanh
   CHAM_SOC: { label: "Đang chăm sóc", color: "#38bdf8" },  // xanh trời
   TN_7NGAY: { label: "Theo dõi 7 ngày", color: "#0ea5e9" },
   TN_14NGAY: { label: "Theo dõi 14 ngày", color: "#0284c7" },

   THAT_BAI: { label: "Thất bại", color: "#dc2626" },       // đỏ đậm
   KHONG_LIEN_LAC_DUOC: { label: "Không liên lạc được", color: "#ea580c" }, // cam đậm
   SAI_SO_LIEU: { label: "Sai số liệu", color: "#9333ea" }, // tím đậm

   THANH_CONG: { label: "Lên VP (ĐK)", color: "#22c55e" },  // xanh lá tươi

   // ===== BỔ SUNG (ĐỔI MÀU RÕ HƠN) =====
   KHACH_HUY_HEN: { label: "Khách huỷ hẹn", color: "#b45309" }, // nâu cam (huỷ)
   BAN_NHANH: { label: "Bán nhanh", color: "#15803d" },        // xanh lá đậm
   BAN_GP: { label: "Bán GP (Đã lên VP)", color: "#0f766e" },  // xanh ngọc đậm (premium)
 };

@@ -853,122 +878,130 @@ function validateForm() {
   }
   if (!isValidName(formData.name)) {
     showCenterWarning("Họ tên phải có ít nhất 2 từ và không chứa số hoặc ký tự đặc biệt.");
     return false;
   }
   if (!formData.phone?.trim()) {
     showCenterWarning("Vui lòng nhập số điện thoại.");
     return false;
   }
   if (!isValidPhone(formData.phone)) {
     showCenterWarning("Số điện thoại không đúng định dạng (ví dụ: 09xxxxxxxx).");
     return false;
   }
   if (!formData.area?.trim()) {
     showCenterWarning("Vui lòng chọn tỉnh/thành.");
     return false;
   }
   if (!formData.price) {
     showWarning("Vui lòng nhập giá bán.");
     return false;
   }
   if (!formData.type) {
     showWarning("Vui lòng chọn phân loại.");
     return false;
   }
+  if (!formData.source) {
+    showWarning("Vui lòng chọn nguồn khách hàng.");
+    return false;
+  }
   return true;
 }

 async function submitData() {
   try {
     if (!validateForm()) return;

     const form = new FormData();
     const dto = {
       name: formData.name,
       phone: normalizePhone(formData.phone),
       area: formData.area,
       oldArea: formData.oldArea,
       type: formData.type,
+      source: formData.source,
       price: formData.price,
       note: formData.note,
     };

     form.append("dto", new Blob([JSON.stringify(dto)], { type: "application/json" }));

     const fileInput = document.getElementById("fileInput");
     if (fileInput?.files?.length) {
       Array.from(fileInput.files).forEach(f => form.append("files", f));
     }

     const res = await showLoading(
         api.post("/customer-crm/marketing/create", form, {
           headers: { "Content-Type": "multipart/form-data" },
           withCredentials: true,
         })
     );

     const data = res.data;
     if (!data.success) {
       updateAlertError(data?.message || "Gửi dữ liệu không thành công. Vui lòng thử lại!");
       return;
     }

     submissionCount.value++;
     updateAlertSuccess(`Đã ghi nhận dữ liệu lượt #${submissionCount.value}`);
     clearForm();

     // ✅ refresh dashboard data thật
     fetchThongKeSoBo();
     fetchThongKeStatus();
     fetchActivityData();
   } catch (err) {
     console.error(err);
     showCenterError("Gửi dữ liệu thất bại. Vui lòng thử lại!");
   }
 }

 function clearForm() {
   formData.name = "";
   formData.phone = "";
   formData.area = "";
   formData.oldArea = "";
   formData.type = "CHINH_CHU";
+  formData.source = "ADS";
   formData.price = "";
   formData.note = "";
   priceDisplay.value = "";
   clearPickedFile();
 }

 /* ===== Demo (giữ nguyên) ===== */
 function generateSampleData() {
   const names = ["Lê Minh Anh", "Trần Quốc Bảo", "Phạm Thị Cẩm", "Nguyễn Đức Duy"];
   const types = ["CHINH_CHU", "MOI_GIOI", "NGUOI_THAN"];
+  const sources = ["ADS", "FORUM", "RAO_VAT", "FB", "SEO"];

   formData.name = names[Math.floor(Math.random() * names.length)];
   formData.phone = `09${Math.floor(Math.random() * 90000000 + 10000000)}`;
   formData.type = types[Math.floor(Math.random() * types.length)];
+  formData.source = sources[Math.floor(Math.random() * sources.length)];
   const samplePrice = Math.floor(Math.random() * 5000 + 500) * 100000;
   formData.price = samplePrice;
   priceDisplay.value = formatPriceDisplay(String(samplePrice));
   formData.note = "Quan tâm dịch vụ. Nhắc gọi lại tuần sau.";
 }

 function exportData() {
   const dataStr = JSON.stringify(
       {
         entries: submissionCount.value,
         exportTime: new Date().toISOString(),
         totalValue: totalValue.value,
       },
       null,
       2
   );

   const dataUri = "data:application/json;charset=utf-8," + encodeURIComponent(dataStr);
   const link = document.createElement("a");
   link.setAttribute("href", dataUri);
   link.setAttribute("download", `marketing-data-${new Date().toISOString().split("T")[0]}.json`);
   document.body.appendChild(link);
   link.click();
   link.remove();
 }
@@ -1367,50 +1400,56 @@ onBeforeUnmount(() => {
   border: 1px solid #e2e8f0;
   border-radius: 10px;
   font-size: 0.875rem;
   color: #1e293b;
   background: white;
   transition: all 0.2s ease;
 }

 .form-control:focus {
   outline: none;
   border-color: #4f46e5;
   box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
 }

 .form-control::placeholder {
   color: #94a3b8;
 }

 /* ===== TYPE BUTTONS ===== */
 .type-buttons {
   display: grid;
   grid-template-columns: repeat(3, 1fr);
   gap: 0.5rem;
 }

+.source-buttons {
+  display: grid;
+  grid-template-columns: repeat(5, minmax(0, 1fr));
+  gap: 0.5rem;
+}
+
 .type-btn {
   padding: 0.7rem 0.55rem;
   background: rgba(248, 250, 252, 0.9);
   border: 1px solid #e2e8f0;
   border-radius: 10px;
   color: #64748b;
   font-size: 0.8125rem;
   cursor: pointer;
   transition: all 0.2s ease;
   display: inline-flex;
   align-items: center;
   justify-content: center;
   gap: 0.45rem;
 }

 .type-btn:hover {
   border-color: #cbd5e1;
   background: rgba(241, 245, 249, 0.95);
 }

 .type-btn.active {
   background: #e0e7ff;
   border-color: #4f46e5;
   color: #4f46e5;
 }
@@ -1783,44 +1822,48 @@ onBeforeUnmount(() => {
     align-items: flex-start;
     gap: 1.2rem;
   }

   .chart-graphic-sm {
     align-self: center;
   }

   .half-panel,
   .status-stack {
     max-width: 100%;
   }
 }

 @media (max-width: 768px) {
   .header-content {
     flex-direction: column;
     align-items: flex-start;
     gap: 1rem;
   }

   .type-buttons {
     grid-template-columns: 1fr;
   }

+  .source-buttons {
+    grid-template-columns: repeat(2, minmax(0, 1fr));
+  }
+
   .activity-filter {
     width: 100%;
     justify-content: space-between;
   }
 }

 .chart-graphic canvas {
   width: 100% !important;
   height: 100% !important;
 }
 .province-dropdown {
   box-shadow: 0 4px 16px rgba(0,0,0,0.07);
   font-size: 0.95em;
 }
 .province-dropdown li:hover {
   background: #f1f5f9;
 }

 </style>
