diff --git a/src/components/dich-vu/Phi-dich-vu.vue b/src/components/dich-vu/Phi-dich-vu.vue
index 39faad149b062b6a73f7406b005e82ac90879e8a..996642c2e12ad631b6c108d0e313259bb571d159 100644
--- a/src/components/dich-vu/Phi-dich-vu.vue
+++ b/src/components/dich-vu/Phi-dich-vu.vue
@@ -1,67 +1,75 @@
 <template>
   <div class="ui-page">
     <!-- TOPBAR -->
     <div class="topbar">
       <div class="brand">
         <div class="brand-ico">
           <i class="fa-solid fa-file-signature"></i>
         </div>
         <div class="min-w-0">
           <div class="brand-title">Quản lý Hợp đồng</div>
           <div class="brand-sub">Upgrade Demo UI • Responsive • Không sửa HĐ • Có xem chi tiết</div>
         </div>
       </div>

       <div class="top-actions">
         <button class="btn primary" @click="openModal('modalContract')">
           <i class="fa-solid fa-plus"></i>
           <span>Thêm hợp đồng</span>
         </button>
       </div>
     </div>
     <!-- KPIs -->
     <div class="kpi-row mt-3">
-      <div class="kpi kpi-total">
-        <div class="k"><span class="dot"></span>Tổng hợp đồng</div>
-        <div class="v price p4">{{ totalElements }}</div>
-        <div class="kpi-ico"><i class="fa-solid fa-file-signature"></i></div>
+      <div class="stat-card kpi-total">
+        <div class="stat-card-content">
+          <h5><i class="fa-solid fa-file-signature"></i> Tổng hợp đồng</h5>
+          <div class="stat-number">{{ totalElements }}</div>
+        </div>
+        <i class="fa-solid fa-file-signature stat-icon"></i>
       </div>
-      <div class="kpi kpi-revenue">
-        <div class="k"><span class="dot"></span>Tổng doanh thu</div>
-        <div class="v price p3">{{ formatMoney(totalDoanhThu) }}</div>
-        <div class="kpi-ico"><i class="fa-solid fa-chart-line"></i></div>
+      <div class="stat-card kpi-revenue">
+        <div class="stat-card-content">
+          <h5><i class="fa-solid fa-chart-line"></i> Tổng doanh thu</h5>
+          <div class="stat-number">{{ formatMoney(totalDoanhThu) }}</div>
+        </div>
+        <i class="fa-solid fa-chart-line stat-icon"></i>
       </div>
-      <div class="kpi kpi-adjust">
-        <div class="k"><span class="dot"></span>Tổng điều chỉnh</div>
-        <div class="v price p2">{{ formatMoney(totalDieuChinh) }}</div>
-        <div class="kpi-ico"><i class="fa-solid fa-sliders"></i></div>
+      <div class="stat-card kpi-adjust">
+        <div class="stat-card-content">
+          <h5><i class="fa-solid fa-sliders"></i> Tổng điều chỉnh</h5>
+          <div class="stat-number">{{ formatMoney(totalDieuChinh) }}</div>
+        </div>
+        <i class="fa-solid fa-sliders stat-icon"></i>
       </div>
-      <div class="kpi kpi-sales">
-        <div class="k"><span class="dot"></span>Tổng doanh số</div>
-        <div class="v price p1">{{ formatMoney(totalDoanhSo) }}</div>
-        <div class="kpi-ico"><i class="fa-solid fa-sack-dollar"></i></div>
+      <div class="stat-card kpi-sales">
+        <div class="stat-card-content">
+          <h5><i class="fa-solid fa-sack-dollar"></i> Tổng doanh số</h5>
+          <div class="stat-number">{{ formatMoney(totalDoanhSo) }}</div>
+        </div>
+        <i class="fa-solid fa-sack-dollar stat-icon"></i>
       </div>
     </div>
     <!-- TABS -->
     <div class="tabs-shell">
       <div class="tabs">
         <div class="tab" :class="{ active: activeTab === 1 }" @click="activeTab = 1">
           <i class="fa-solid fa-layer-group"></i>
           Danh sách & thao tác
           <span class="pill">{{ totalElements }}</span>
         </div>

         <div class="tab" :class="{ active: activeTab === 2 }" @click="activeTab = 2">
           <i class="fa-solid fa-chart-line"></i>
           Thống kê
           <span class="pill">0</span>
         </div>
       </div>

       <!-- PANEL TAB 1 -->
       <div class="panel attached" v-show="activeTab === 1">
         <div class="panel-h">
           <div class="tools">
             <div class="input filter-item filter-search" :class="{ active: searchQuery }">
               <i class="fa-solid fa-magnifying-glass"></i>
               <input v-model="searchQuery" type="text" placeholder="Tìm theo mã HĐ / khách / người tạo...">
@@ -655,54 +663,54 @@

     <!-- MODAL: ADJUST -->
     <div class="modal" :class="{ show: showModal === 'modalAdjust' }" @click.self="closeModal('modalAdjust')">
       <div class="modal-card">
         <div class="modal-h">
           <div class="modal-title">
             <i class="fa-solid fa-sliders"></i>
             Điều chỉnh hợp đồng
           </div>
           <button class="x" @click="closeModal('modalAdjust')">
             <i class="fa-solid fa-xmark"></i>
           </button>
         </div>

         <div class="modal-b">
           <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
             <div class="card">
               <div class="card-h"><i class="fa-solid fa-pen-to-square"></i> Thông tin điều chỉnh</div>

               <div class="field">
                 <label><i class="fa-solid fa-coins"></i> Số tiền điều chỉnh</label>
                 <input
                   :value="formatNumberInput(adjustment.amount)"
                   type="text"
                   inputmode="numeric"
-                  placeholder="VD: -500.000 hoặc 300.000"
+                  placeholder="VD: 300.000"
                   @input="handleAdjustmentAmountInput"
                 >
-                <div class="muted tiny">Âm = giảm thêm • Dương = phụ thu / phạt</div>
+                <div class="muted tiny">Chỉ nhập số dương cho điều chỉnh.</div>
               </div>

               <div class="field">
                 <label><i class="fa-solid fa-layer-group"></i> Loại điều chỉnh</label>
                 <select v-model="adjustment.type">
                   <option value="GIAM_GIA">Giảm thêm</option>
                   <option value="PHU_THU">Phụ thu</option>
                   <option value="PHAT">Phạt</option>
                 </select>
               </div>

               <div class="field">
                 <label><i class="fa-solid fa-clipboard"></i> Lý do</label>
                 <textarea v-model="adjustment.reason" placeholder="VD: Phạt trễ tiến độ..."></textarea>
               </div>
             </div>

             <div class="card">
               <div class="card-h"><i class="fa-solid fa-circle-info"></i> Tóm tắt hợp đồng</div>
               <div class="p-3">
                 <div class="text-sm font-extrabold">{{ currentContract?.maHopDong }} • {{ currentContract?.tenKhachHang }}</div>
                 <div class="muted tiny mt-1">{{ currentContract?.tenDichVu }} • Ngày tạo {{ formatCreatedAt(currentContract?.ngayTao) }} • Trạng thái {{ getStatusText(currentContract?.trangThaiHopDong) }}</div>

                 <div class="grid grid-cols-2 gap-2 mt-3">
                   <div class="kpi">
@@ -926,50 +934,51 @@
           <div class="p-2">
             <div class="font-extrabold">Xóa hợp đồng {{ currentContract?.maHopDong }}?</div>
             <div class="muted mt-2">{{ currentContract?.tenKhachHang }} • {{ currentContract?.tenDichVu }} • Doanh thu hiện tại: {{ formatMoney(getDoanhThu(currentContract)) }}</div>
             <div class="note mt-3">
               Xóa sẽ mất cả các đợt <b>đóng phí</b>, <b>hoàn phí</b>, <b>điều chỉnh</b> của hợp đồng này.
             </div>
           </div>
         </div>
         <div class="modal-f">
           <button class="btn ghost" @click="closeModal('modalDelete')">
             <i class="fa-solid fa-ban"></i> Hủy
           </button>
           <button class="btn danger" @click="confirmDelete">
             <i class="fa-solid fa-trash"></i> Xóa luôn
           </button>
         </div>
       </div>
     </div>
   </div>
 </template>

 <script setup>
 import { ref, computed, watch, onMounted } from 'vue'
 import api from '/src/api/api.js'
 import {
+  confirmWithInput,
   showCenterWarning,
   showError,
   showLoading,
   updateAlertError,
   updateAlertSuccess
 } from '/src/assets/js/alertService.js'
 const todayISO = () => {
   const d = new Date()
   const yyyy = d.getFullYear()
   const mm = String(d.getMonth() + 1).padStart(2, '0')
   const dd = String(d.getDate()).padStart(2, '0')
   return `${yyyy}-${mm}-${dd}`
 }
 // Constants
 const ENUM_STATUS = ['DANG_HIEU_LUC', 'HOAN_TAT', 'HUY']
 const ENUM_PAY = ['TIEN_MAT', 'CHUYEN_KHOAN', 'QR', 'KHAC']
 const ENUM_ADJ = ['GIAM_GIA', 'PHU_THU', 'PHAT']

 // State
 const activeTab = ref(1)
 const contracts = ref([])
 const totalElements = ref(0)
 const totalPages = ref(1)
 const seq = ref(1)
 const services = ref([])
@@ -1830,121 +1839,135 @@ const saveRefund = async () => {
   }

   try {
     await showLoading(api.post('/hop-dong/admin/hoan-phi', payload))
     updateAlertSuccess('Hoàn phí thành công', `-${formatMoney(refund.value.amount)}`)
     await fetchContracts()
     closeModal('modalRefund')
   } catch (error) {
     console.error('❌ Lỗi hoàn phí', error)
     updateAlertError('Hoàn phí thất bại', 'Vui lòng thử lại sau.')
   }
 }

 // Adjustment management
 const openAdjust = (contract) => {
   currentContract.value = contract
   adjustment.value = {
     amount: 0,
     type: 'GIAM_GIA',
     reason: ''
   }
   openModal('modalAdjust')
 }

 const handleAdjustmentAmountInput = (event) => {
-  const value = parseNumberInput(event.target.value, true)
-  if (adjustment.value.type !== 'GIAM_GIA' && value < 0) {
-    adjustment.value.amount = Math.abs(value)
-    return
-  }
-  adjustment.value.amount = value
+  adjustment.value.amount = parseNumberInput(event.target.value)
 }

 const saveAdjustment = async () => {
-  if (adjustment.value.amount === 0) {
-    showToastMessage('error', 'Số tiền không hợp lệ', 'Điều chỉnh phải khác 0 (âm hoặc dương).')
+  if (adjustment.value.amount <= 0) {
+    showToastMessage('error', 'Số tiền không hợp lệ', 'Điều chỉnh phải lớn hơn 0.')
     return
   }

   if (!ENUM_ADJ.includes(adjustment.value.type)) {
     showToastMessage('error', 'Loại điều chỉnh sai', 'Chọn GIAM_GIA/PHU_THU/PHAT.')
     return
   }

-  if (adjustment.value.amount < 0 && adjustment.value.type !== 'GIAM_GIA') {
-    showToastMessage('error', 'Sai số tiền', 'Chỉ "Giảm thêm" mới được nhập số âm.')
-    return
+  if (adjustment.value.type === 'GIAM_GIA') {
+    const giaSauGiam = Number(currentContract.value?.giaSauGiam || 0)
+    const tongDieuChinh = getTongDieuChinh(currentContract.value)
+    const maxGiam = giaSauGiam + tongDieuChinh
+    if (adjustment.value.amount > maxGiam) {
+      showCenterWarning(
+        'Số tiền giảm vượt mức',
+        `Tối đa được giảm: ${formatMoney(maxGiam)}.`
+      )
+      return
+    }
   }

   const reason = (adjustment.value.reason || '').trim()
   if (!reason) {
     showToastMessage('error', 'Thiếu lý do', 'Bạn cần nhập lý do điều chỉnh.')
     return
   }

   const payload = {
     hopDongId: currentContract.value.id,
     soTienDieuChinh: adjustment.value.amount,
     loaiDieuChinh: adjustment.value.type,
     lyDo: reason
   }

   try {
     await showLoading(api.post('/hop-dong/admin/dieu-chinh', payload))
     updateAlertSuccess('Điều chỉnh thành công',
-        `${adjustment.value.amount > 0 ? '+' : ''}${formatMoney(adjustment.value.amount)} (${adjustment.value.type})`)
+        `${adjustment.value.type === 'GIAM_GIA' ? '-' : '+'}${formatMoney(adjustment.value.amount)} (${adjustment.value.type})`)
     await fetchContracts()
     closeModal('modalAdjust')
   } catch (error) {
     console.error('❌ Lỗi điều chỉnh', error)
     updateAlertError('Điều chỉnh thất bại', 'Vui lòng thử lại sau.')
   }
 }

-watch(() => adjustment.value.type, (nextType) => {
-  if (nextType !== 'GIAM_GIA' && adjustment.value.amount < 0) {
-    adjustment.value.amount = Math.abs(adjustment.value.amount)
-  }
-})
-
 // Detail view
 const openDetail = (contract) => {
   currentContract.value = contract
   openModal('modalDetail')
 }

 // Delete management
 const openDelete = (contract) => {
   currentContract.value = contract
   openModal('modalDelete')
 }

-const confirmDelete = () => {
-  contracts.value = contracts.value.filter(c => c.id !== currentContract.value.id)
-  showToastMessage('success', 'Đã xóa', `Đã xóa ${currentContract.value.maHopDong}`)
+const confirmDelete = async () => {
+  const contract = currentContract.value
+  if (!contract) return
+
   closeModal('modalDelete')
+
+  await confirmWithInput(
+    'Xác nhận xóa hợp đồng',
+    `Nhập mã hợp đồng ${contract.maHopDong} để xác nhận xóa.`,
+    contract.maHopDong,
+    async () => {
+      try {
+        await showLoading(api.delete(`/hop-dong/admin/${contract.id}`))
+        updateAlertSuccess('Đã xóa hợp đồng', `Đã xóa ${contract.maHopDong}`)
+        await fetchContracts()
+      } catch (error) {
+        console.error('❌ Lỗi xóa hợp đồng', error)
+        updateAlertError('Xóa hợp đồng thất bại', 'Vui lòng thử lại sau.')
+      }
+    }
+  )
 }

 // Filters
 const resetFilters = () => {
   searchQuery.value = ''
   filterService.value = null
   filterStatus.value = null
   currentPage.value = 1
   fetchContracts()
   showToastMessage('info', 'Đã reset lọc', 'Hiển thị toàn bộ hợp đồng.')
 }

 const goToPage = (page) => {
   const next = Math.min(totalPages.value, Math.max(1, page))
   currentPage.value = next
 }

 const nextPage = () => {
   goToPage(currentPage.value + 1)
 }

 const prevPage = () => {
   goToPage(currentPage.value - 1)
 }

@@ -2515,90 +2538,117 @@ onMounted(async () => {
 .select select:focus{
   border-color: rgba(102,126,234,.55);
   box-shadow: 0 0 0 4px rgba(102,126,234,.14);
 }
 .tools-actions{ display:flex; justify-content:flex-end; gap:8px; flex-wrap:wrap; }

 /* =========================
    KPI
 ========================= */
 .kpi-row{
   display:grid;
   grid-template-columns: repeat(4, minmax(0,1fr));
   gap:10px;
   margin-bottom: 12px;
 }
 @media (max-width: 980px){ .kpi-row{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
 @media (max-width: 520px){ .kpi-row{ grid-template-columns: 1fr; } }
 .kpi{
   border: 1px solid rgba(20,30,48,.12);
   border-radius: 14px;
   padding: 10px 12px;
   background: rgba(255,255,255,.84);
   box-shadow: 0 12px 24px rgba(20,30,48,.08);
   overflow:hidden;
 }
-.kpi-row .kpi{
-  position: relative;
-  border: none;
+
+.stat-card{
+  border-radius: 16px;
+  padding: 18px 20px;
   color: #fff;
-  background: var(--primary-gradient);
+  transition: var(--t);
+  position: relative;
+  overflow: hidden;
+  box-shadow: 0 12px 24px rgba(20,30,48,.16);
   min-height: 120px;
   display: flex;
   flex-direction: column;
-  transition: var(--t);
+  justify-content: space-between;
 }
-.kpi-row .kpi:hover{
-  transform: translateY(-4px) scale(1.01);
-  box-shadow: 0 18px 32px rgba(20,30,48,.18);
-}
-.kpi-row .kpi-total{ background: var(--primary-gradient); }
-.kpi-row .kpi-revenue{ background: var(--success-gradient); }
-.kpi-row .kpi-adjust{ background: var(--warning-gradient); }
-.kpi-row .kpi-sales{ background: var(--secondary-gradient); }
-.kpi-row .kpi .k{
-  color: rgba(255,255,255,.86);
+.stat-card::before{
+  content: '';
+  position: absolute;
+  inset: 0;
+  background: inherit;
+  opacity: 0.9;
+  z-index: 1;
 }
-.kpi-row .kpi .k .dot{
-  background: rgba(255,255,255,.75);
+.stat-card::after{
+  content: '';
+  position: absolute;
+  top: -50%;
+  right: -50%;
+  width: 100%;
+  height: 200%;
+  background: rgba(255, 255, 255, 0.1);
+  transform: rotate(30deg);
+  transition: var(--t);
+  z-index: 2;
 }
-.kpi-row .kpi .v{
-  color: #fff;
-  margin-top: auto;
-  font-size: 22px;
+.stat-card:hover::after{ transform: rotate(30deg) translateX(100px); }
+.stat-card-content{ position: relative; z-index: 3; }
+.stat-card h5{
+  font-size: 16px;
+  opacity: 0.9;
+  margin-bottom: 8px;
+  font-weight: 700;
+  display: flex;
+  align-items: center;
+  gap: 8px;
 }
-.kpi-row .kpi .v.price{
-  background: none;
-  -webkit-text-fill-color: #fff;
+.stat-card .stat-number{
+  font-size: 24px;
+  font-weight: 800;
+  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
 }
-.kpi-row .kpi-ico{
+.stat-icon{
   position: absolute;
-  top: 10px;
-  right: 10px;
-  font-size: 24px;
+  bottom: 14px;
+  right: 14px;
+  font-size: 36px;
+  opacity: 0.3;
+  z-index: 3;
+  transition: var(--t);
+}
+.stat-card:hover .stat-icon{
+  transform: scale(1.05) rotate(5deg);
   opacity: 0.4;
 }
+.kpi-total{ background: var(--primary-gradient); }
+.kpi-revenue{ background: var(--success-gradient); }
+.kpi-adjust{ background: var(--warning-gradient); }
+.kpi-sales{ background: var(--secondary-gradient); }
 .kpi .k{
   font-size: 11px;
   color: rgba(11,18,32,.60);
   font-weight: 900;
   letter-spacing: .3px;
   text-transform: uppercase;
   display:flex;
   gap:8px;
   align-items:center;
 }
 .kpi .k .dot{
   width: 8px; height: 8px; border-radius: 999px;
   background: var(--info-gradient);
   flex: 0 0 auto;
 }
 .kpi .v{
   margin-top: 4px;
   font-weight: 600;
   font-size: 16px;
   white-space: nowrap;
   overflow:hidden;
   text-overflow: ellipsis;
 }
 .price{ font-weight: 950; white-space: nowrap; }
 .p1{ background: var(--primary-gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
